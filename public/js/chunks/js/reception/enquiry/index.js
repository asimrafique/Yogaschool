"use strict";(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[8131],{35914:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!==n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:()=>a});const i={components:{},props:["uuid"],data:function(){return{enquiryForm:new Form({first_guardian_name:"",first_guardian_relation:"",second_guardian_name:"",second_guardian_relation:"",third_guardian_name:"",third_guardian_relation:"",date_of_enquiry:"",enquiry_type_id:"",enquiry_source_id:"",contact_number:"",alternate_contact_number:"",email:"",remarks:"",students:[]}),guardian_relations:[],enquiry_types:[],enquiry_sources:[],courses:[],institutes:[],genders:[],selected_enquiry_type:null,selected_enquiry_source:null}},mounted:function(){this.uuid||this.addRow(),this.uuid&&this.get(),this.getPreRequisite()},methods:{proceed:function(){this.uuid?this.update():this.store()},getPreRequisite:function(){var e=this,t=this.$loading.show();axios.get("/api/enquiry/pre-requisite").then((function(r){e.enquiry_types=r.enquiry_types,e.enquiry_sources=r.enquiry_sources,e.courses=r.courses,e.institutes=r.institutes,e.genders=r.genders,e.guardian_relations=r.guardian_relations,t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},addRow:function(){this.enquiryForm.students.push({uuid:this.$uuid.v4(),student_name:"",date_of_birth:"",gender:"",course_id:"",institute_id:"",remarks:"",selected_course:null,selected_institute:null})},getStudentName:function(e){return e+"_student_name"},getRemarkName:function(e){return e+"_remarks"},getDateOfBirthName:function(e){return e+"_date_of_birth"},getCourseName:function(e){return e+"_course_id"},getCurrentInstituteName:function(e){return e+"_institute_id"},getGenderName:function(e){return e+"_gender"},getGenderId:function(e,t){return e+"_"+t+"_gender"},get:function(){var e=this,t=this.$loading.show();axios.get("/api/enquiry/"+this.uuid).then((function(r){e.enquiryForm.date_of_enquiry=r.enquiry.date_of_enquiry,e.enquiryForm.first_guardian_name=r.enquiry.first_guardian_name,e.enquiryForm.second_guardian_name=r.enquiry.second_guardian_name,e.enquiryForm.third_guardian_name=r.enquiry.third_guardian_name,e.enquiryForm.first_guardian_relation=r.enquiry.first_guardian_relation,e.enquiryForm.second_guardian_relation=r.enquiry.second_guardian_relation,e.enquiryForm.third_guardian_relation=r.enquiry.third_guardian_relation,e.enquiryForm.contact_number=r.enquiry.contact_number,e.enquiryForm.alternate_contact_number=r.enquiry.alternate_contact_number,e.enquiryForm.email=r.enquiry.email,e.enquiryForm.remarks=r.enquiry.remarks,e.enquiryForm.enquiry_type_id=r.enquiry.enquiry_type_id,e.selected_enquiry_type=r.enquiry.enquiry_type_id?{id:r.enquiry.enquiry_type_id,name:r.enquiry.enquiry_type.name}:null,e.enquiryForm.enquiry_source_id=r.enquiry.enquiry_source_id,e.selected_enquiry_source=r.enquiry.enquiry_source_id?{id:r.enquiry.enquiry_source_id,name:r.enquiry.enquiry_source.name}:null,r.enquiry.enquiry_details.forEach((function(t){e.enquiryForm.students.push({uuid:t.uuid,student_name:t.student_name,gender:t.gender,date_of_birth:t.date_of_birth,course_id:t.course_id,selected_course:t.course_id?{id:t.course_id,name:t.course.name}:null,institute_id:t.institute_id,selected_institute:t.institute_id?{id:t.institute_id,name:t.institute.name}:null,remarks:t.remarks})})),t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},store:function(){var e=this,t=this.$loading.show();this.enquiryForm.post("/api/enquiry").then((function(r){toastr.success(r.message),e.enquiryForm.selected_enquiry_type=null,e.enquiryForm.selected_enquiry_source=null,e.enquiryForm.students=[],e.addRow(),e.$emit("completed"),t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},update:function(){var e=this,t=this.$loading.show();this.enquiryForm.patch("/api/enquiry/"+this.uuid).then((function(r){toastr.success(r.message),t.hide(),e.$router.push("/reception/enquiry")})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},onEnquiryTypeSelect:function(e){this.enquiryForm.enquiry_type_id=e.id},onEnquirySourceSelect:function(e){this.enquiryForm.enquiry_source_id=e.id},confirmDelete:function(e){var t=this;return function(r){return t.deleteStudent(e)}},deleteStudent:function(e){this.enquiryForm.students.splice(e,1)},onCourseSelect:function(e,t){var r=t.split("_")[0];this.enquiryForm.students[r].course_id=e.id},onCourseRemove:function(e,t){var r=t.split("_")[0];this.enquiryForm.students[r].course_id=""},onInstituteSelect:function(e,t){var r=t.split("_")[0];this.enquiryForm.students[r].institute_id=e.id},onInstituteRemove:function(e,t){var r=t.split("_")[0];this.enquiryForm.students[r].institute_id=""}},computed:{getDefaultAcademicSession:function(){return helper.getDefaultAcademicSession()}}};const a=(0,r(51900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("form",{on:{submit:function(t){return t.preventDefault(),e.proceed.apply(null,arguments)},keydown:function(t){return e.enquiryForm.errors.clear(t.target.name)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.date_of_enquiry")))]),e._v(" "),t("datepicker",{attrs:{bootstrapStyling:!0,placeholder:e.trans("reception.date_of_enquiry")},on:{selected:function(t){return e.enquiryForm.errors.clear("date_of_enquiry")}},model:{value:e.enquiryForm.date_of_enquiry,callback:function(t){e.$set(e.enquiryForm,"date_of_enquiry",t)},expression:"enquiryForm.date_of_enquiry"}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"date_of_enquiry"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.enquiry_type")))]),e._v(" "),t("v-select",{attrs:{label:"name",name:"enquiry_type_id",id:"enquiry_type_id",options:e.enquiry_types,placeholder:e.trans("reception.select_enquiry_type")},on:{select:e.onEnquiryTypeSelect,close:function(t){return e.enquiryForm.errors.clear("enquiry_type_id")},remove:function(t){e.enquiryForm.enquiry_type_id=""}},model:{value:e.selected_enquiry_type,callback:function(t){e.selected_enquiry_type=t},expression:"selected_enquiry_type"}},[e.enquiry_types.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                "+e._s(e.trans("general.no_option_found"))+"\n                            ")])]),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"enquiry_type_id"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.enquiry_source")))]),e._v(" "),t("v-select",{attrs:{label:"name",name:"enquiry_source_id",id:"enquiry_source_id",options:e.enquiry_sources,placeholder:e.trans("reception.select_enquiry_source")},on:{select:e.onEnquirySourceSelect,close:function(t){return e.enquiryForm.errors.clear("enquiry_source_id")},remove:function(t){e.enquiryForm.enquiry_source_id=""}},model:{value:e.selected_enquiry_source,callback:function(t){e.selected_enquiry_source=t},expression:"selected_enquiry_source"}},[e.enquiry_sources.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                "+e._s(e.trans("general.no_option_found"))+"\n                            ")])]),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"enquiry_source_id"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.email")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.email,expression:"enquiryForm.email"}],staticClass:"form-control",attrs:{type:"text",name:"email",placeholder:e.trans("student.email")},domProps:{value:e.enquiryForm.email},on:{input:function(t){t.target.composing||e.$set(e.enquiryForm,"email",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"email"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.contact_number")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.contact_number,expression:"enquiryForm.contact_number"}],staticClass:"form-control",attrs:{type:"text",name:"contact_number",placeholder:e.trans("student.contact_number")},domProps:{value:e.enquiryForm.contact_number},on:{input:function(t){t.target.composing||e.$set(e.enquiryForm,"contact_number",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"contact_number"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.alternate_contact_number")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.alternate_contact_number,expression:"enquiryForm.alternate_contact_number"}],staticClass:"form-control",attrs:{type:"text",name:"alternate_contact_number",placeholder:e.trans("student.alternate_contact_number")},domProps:{value:e.enquiryForm.alternate_contact_number},on:{input:function(t){t.target.composing||e.$set(e.enquiryForm,"alternate_contact_number",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"alternate_contact_number"}})],1)])]),e._v(" "),t("h4",{staticClass:"card-title"},[e._v(e._s(e.trans("student.guardian")))]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.first_guardian_name")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.first_guardian_name,expression:"enquiryForm.first_guardian_name"}],staticClass:"form-control",attrs:{type:"text",name:"first_guardian_name",placeholder:e.trans("student.first_guardian_name")},domProps:{value:e.enquiryForm.first_guardian_name},on:{input:function(t){t.target.composing||e.$set(e.enquiryForm,"first_guardian_name",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"first_guardian_name"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("general.relation")))]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.first_guardian_relation,expression:"enquiryForm.first_guardian_relation"}],staticClass:"custom-select col-12",attrs:{name:"first_guardian_relation"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.enquiryForm,"first_guardian_relation",t.target.multiple?r:r[0])},function(t){return e.enquiryForm.errors.clear("first_guardian_relation")}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.trans("general.select_one")))]),e._v(" "),e._l(e.guardian_relations,(function(r){return t("option",{domProps:{value:r.id}},[e._v("\n                            "+e._s(r.name)+"\n                          ")])}))],2),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"first_guardian_relation"}})],1)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.second_guardian_name")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.second_guardian_name,expression:"enquiryForm.second_guardian_name"}],staticClass:"form-control",attrs:{type:"text",name:"second_guardian_name",placeholder:e.trans("student.second_guardian_name")},domProps:{value:e.enquiryForm.second_guardian_name},on:{input:function(t){t.target.composing||e.$set(e.enquiryForm,"second_guardian_name",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"second_guardian_name"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("general.relation")))]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.second_guardian_relation,expression:"enquiryForm.second_guardian_relation"}],staticClass:"custom-select col-12",attrs:{name:"second_guardian_relation"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.enquiryForm,"second_guardian_relation",t.target.multiple?r:r[0])},function(t){return e.enquiryForm.errors.clear("second_guardian_relation")}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.trans("general.select_one")))]),e._v(" "),e._l(e.guardian_relations,(function(r){return t("option",{domProps:{value:r.id}},[e._v("\n                            "+e._s(r.name)+"\n                          ")])}))],2),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"second_guardian_relation"}})],1)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.third_guardian_name")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.third_guardian_name,expression:"enquiryForm.third_guardian_name"}],staticClass:"form-control",attrs:{type:"text",name:"third_guardian_name",placeholder:e.trans("student.third_guardian_name")},domProps:{value:e.enquiryForm.third_guardian_name},on:{input:function(t){t.target.composing||e.$set(e.enquiryForm,"third_guardian_name",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"third_guardian_name"}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("general.relation")))]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.enquiryForm.third_guardian_relation,expression:"enquiryForm.third_guardian_relation"}],staticClass:"custom-select col-12",attrs:{name:"third_guardian_relation"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.enquiryForm,"third_guardian_relation",t.target.multiple?r:r[0])},function(t){return e.enquiryForm.errors.clear("third_guardian_relation")}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.trans("general.select_one")))]),e._v(" "),e._l(e.guardian_relations,(function(r){return t("option",{domProps:{value:r.id}},[e._v("\n                            "+e._s(r.name)+"\n                          ")])}))],2),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"third_guardian_relation"}})],1)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-9"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.enquiry_remarks")))]),e._v(" "),t("autosize-textarea",{attrs:{rows:"1",name:"remarks",placeholder:e.trans("reception.enquiry_remarks")},model:{value:e.enquiryForm.remarks,callback:function(t){e.$set(e.enquiryForm,"remarks",t)},expression:"enquiryForm.remarks"}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":"remarks"}})],1)])]),e._v(" "),t("div",{staticClass:"p-t-20 border-top"},[e._l(e.enquiryForm.students,(function(r,n){return t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v("\n                                "+e._s(e.trans("student.name"))+"\n                                "),t("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:e.confirmDelete(n)},expression:"{ok: confirmDelete(index)}"},{name:"tooltip",rawName:"v-tooltip",value:e.trans("student.delete_student"),expression:"trans('student.delete_student')"}],key:"".concat(n,"_delete_student"),staticClass:"btn btn-xs btn-danger",attrs:{type:"button"}},[t("i",{staticClass:"fas fa-times"})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:r.student_name,expression:"student.student_name"}],staticClass:"form-control",attrs:{type:"text",name:e.getStudentName(n),placeholder:e.trans("student.name")},domProps:{value:r.student_name},on:{input:function(t){t.target.composing||e.$set(r,"student_name",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":e.getStudentName(n)}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.gender")))]),e._v(" "),t("div",{staticClass:"radio radio-info p-l-0"},e._l(e.genders,(function(i){return t("div",{staticClass:"form-check form-check-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.gender,expression:"student.gender"}],staticClass:"form-check-input",attrs:{type:"radio",id:e.getGenderId(n,i.id),name:e.getGenderName(n)},domProps:s({value:i.id,checked:r.gender==i.id},"checked",e._q(r.gender,i.id)),on:{click:function(t){e.enquiryForm.errors.clear(e.getGenderName(n))},change:function(t){return e.$set(r,"gender",i.id)}}}),e._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:e.getGenderId(n,i.id)}},[e._v(" "+e._s(e.trans("list."+i.id)))])])})),0),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":e.getGenderName(n)}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("student.date_of_birth")))]),e._v(" "),t("datepicker",{attrs:{bootstrapStyling:!0,placeholder:e.trans("student.date_of_birth")},on:{selected:function(t){e.enquiryForm.errors.clear(e.getDateOfBirthName(n))}},model:{value:r.date_of_birth,callback:function(t){e.$set(r,"date_of_birth",t)},expression:"student.date_of_birth"}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":e.getDateOfBirthName(n)}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("academic.course")+" "+e.getDefaultAcademicSession.name))]),e._v(" "),t("v-select",{attrs:{label:"name","group-values":"courses","group-label":"course_group","group-select":!1,name:e.getCourseName(n),id:e.getCourseName(n),options:e.courses,placeholder:e.trans("academic.select_course")},on:{select:e.onCourseSelect,close:function(t){e.enquiryForm.errors.clear(e.getCourseName(n))},remove:e.onCourseRemove},model:{value:r.selected_course,callback:function(t){e.$set(r,"selected_course",t)},expression:"student.selected_course"}},[e.courses.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])]),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":e.getCourseName(n)}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.current_institute")))]),e._v(" "),t("v-select",{attrs:{label:"name",name:e.getCurrentInstituteName(n),id:e.getCurrentInstituteName(n),options:e.institutes,placeholder:e.trans("academic.select_institute")},on:{select:e.onInstituteSelect,close:function(t){e.enquiryForm.errors.clear(e.getCurrentInstituteName(n))},remove:e.onInstituteRemove},model:{value:r.selected_institute,callback:function(t){e.$set(r,"selected_institute",t)},expression:"student.selected_institute"}},[e.institutes.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])]),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":e.getCurrentInstituteName(n)}})],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v("\n                                "+e._s(e.trans("student.remarks"))+"\n                            ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:r.remarks,expression:"student.remarks"}],staticClass:"form-control",attrs:{type:"text",name:e.getRemarkName(n),placeholder:e.trans("student.remarks")},domProps:{value:r.remarks},on:{input:function(t){t.target.composing||e.$set(r,"remarks",t.target.value)}}}),e._v(" "),t("show-error",{attrs:{"form-name":e.enquiryForm,"prop-name":e.getRemarkName(n)}})],1)])])})),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-info btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:e.addRow}},[e._v(e._s(e.trans("student.add_new_student")))])])])])],2),e._v(" "),t("div",{staticClass:"card-footer text-right"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.uuid,expression:"uuid"}],staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.$router.push("/reception/enquiry")}}},[e._v(e._s(e.trans("general.cancel")))]),e._v(" "),e.uuid?e._e():t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(e._s(e.trans("general.cancel")))]),e._v(" "),t("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[e._v(e._s(e.trans("general.save")))])])])])}),[],!1,null,null,null).exports},55775:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const n={components:{enquiryForm:r(35914).Z},data:function(){return{enquiries:{total:0,data:[]},filter:{sort_by:"date_of_enquiry",order:"desc",enquiry_type_id:[],enquiry_source_id:[],enquiry_status:[],institute_id:[],date_of_enquiry_start_date:"",date_of_enquiry_end_date:"",page_length:helper.getConfig("page_length")},orderByOptions:[{value:"date_of_enquiry",translation:i18n.reception.date_of_enquiry},{value:"created_at",translation:i18n.general.created_at}],showFilterPanel:!1,showCreatePanel:!1,enquiry_types:[],selected_enquiry_types:null,enquiry_sources:[],selected_enquiry_sources:null,enquiry_statuses:[],selected_enquiry_statuses:null,institutes:[],selected_institutes:null,help_topic:""}},mounted:function(){helper.hasPermission("list-enquiry")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.getEnquiries(),helper.showDemoNotification(["reception"])},methods:{hasPermission:function(e){return helper.hasPermission(e)},getEmployeeName:function(e){return helper.getEmployeeName(e)},getEnquiries:function(e){var t=this,r=this.$loading.show();"number"!=typeof e&&(e=1),this.filter.date_of_enquiry_start_date=helper.toDate(this.filter.date_of_enquiry_start_date),this.filter.date_of_enquiry_end_date=helper.toDate(this.filter.date_of_enquiry_end_date);var n=helper.getFilterURL(this.filter);axios.get("/api/enquiry?page="+e+n).then((function(e){t.enquiries=e.enquiries,t.enquiry_types=e.filters.enquiry_types,t.enquiry_sources=e.filters.enquiry_sources,t.enquiry_statuses=e.filters.enquiry_statuses,t.institutes=e.filters.institutes,r.hide()})).catch((function(e){r.hide(),helper.showErrorMsg(e)}))},editEnquiry:function(e){this.$router.push("/reception/enquiry/"+e.uuid+"/edit")},confirmDelete:function(e){var t=this;return function(r){return t.deleteEnquiry(e)}},deleteEnquiry:function(e){var t=this,r=this.$loading.show();axios.delete("/api/enquiry/"+e.uuid).then((function(e){toastr.success(e.message),t.getEnquiries(),r.hide()})).catch((function(e){r.hide(),helper.showErrorMsg(e)}))},getConfig:function(e){return helper.getConfig(e)},print:function(){var e=this.$loading.show();axios.post("/api/enquiry/print",{filter:this.filter}).then((function(t){var r=window.open("/print");e.hide(),r.document.write(t)})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},pdf:function(){var e=this,t=this.$loading.show();axios.post("/api/enquiry/pdf",{filter:this.filter}).then((function(r){t.hide(),window.open("/download/report/"+r+"?token="+e.authToken)})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},onEnquiryTypeSelect:function(e){this.filter.enquiry_type_id.push(e.id)},onEnquiryTypeRemove:function(e){this.filter.enquiry_type_id.splice(this.filter.enquiry_type_id.indexOf(e.id),1)},onEnquirySourceSelect:function(e){this.filter.enquiry_source_id.push(e.id)},onEnquirySourceRemove:function(e){this.filter.enquiry_source_id.splice(this.filter.enquiry_source_id.indexOf(e.id),1)},onEnquiryStatusSelect:function(e){this.filter.enquiry_status.push(e.id)},onEnquiryStatusRemove:function(e){this.filter.enquiry_status.splice(this.filter.enquiry_status.indexOf(e.id),1)},onInstituteSelect:function(e){this.filter.institute_id.push(e.id)},onInstituteRemove:function(e){this.filter.institute_id.splice(this.filter.institute_id.indexOf(e.id),1)},getEnquiryStatus:function(e){return helper.getEnquiryStatus(e)}},filters:{moment:function(e){return helper.formatDate(e)},momentDateTime:function(e){return helper.formatDateTime(e)},momentTime:function(e){return helper.formatTime(e)}},watch:{"filter.sort_by":function(e){this.getEnquiries()},"filter.order":function(e){this.getEnquiries()},"filter.page_length":function(e){this.getEnquiries()}},computed:{authToken:function(){return helper.getAuthToken()}}},s=n;var i=(0,r(51900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"page-titles"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("h3",{staticClass:"text-themecolor"},[e._v(e._s(e.trans("reception.admission_enquiry"))+"\n                    "),e.enquiries.total?t("span",{staticClass:"card-subtitle d-none d-sm-inline"},[e._v(e._s(e.trans("general.total_result_found",{count:e.enquiries.total,from:e.enquiries.from,to:e.enquiries.to})))]):t("span",{staticClass:"card-subtitle d-none d-sm-inline"},[e._v(e._s(e.trans("general.no_result_found")))])])]),e._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"action-buttons pull-right"},[e.enquiries.total&&!e.showCreatePanel&&e.hasPermission("create-enquiry")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.trans("general.add_new"),expression:"trans('general.add_new')"}],staticClass:"btn btn-info btn-sm",on:{click:function(t){e.showCreatePanel=!e.showCreatePanel}}},[t("i",{staticClass:"fas fa-plus"}),e._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[e._v(e._s(e.trans("reception.add_new_enquiry")))])]):e._e(),e._v(" "),e.showFilterPanel?e._e():t("button",{staticClass:"btn btn-info btn-sm",on:{click:function(t){e.showFilterPanel=!e.showFilterPanel}}},[t("i",{staticClass:"fas fa-filter"}),e._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[e._v(e._s(e.trans("general.filter")))])]),e._v(" "),t("sort-by",{attrs:{"order-by-options":e.orderByOptions,"sort-by":e.filter.sort_by,order:e.filter.order},on:{updateSortBy:function(t){e.filter.sort_by=t},updateOrder:function(t){e.filter.order=t}}}),e._v(" "),t("div",{staticClass:"btn-group"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.trans("general.more_option"),expression:"trans('general.more_option')"}],staticClass:"btn btn-info btn-sm dropdown-toggle no-caret",attrs:{type:"button",role:"menu",id:"moreOption","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-ellipsis-h"}),e._v(" "),t("span",{staticClass:"d-none d-sm-inline"})]),e._v(" "),t("div",{class:["dropdown-menu","ltr"==e.getConfig("direction")?"dropdown-menu-right":""],attrs:{"aria-labelledby":"moreOption"}},[t("button",{staticClass:"dropdown-item custom-dropdown",on:{click:e.print}},[t("i",{staticClass:"fas fa-print"}),e._v(" "+e._s(e.trans("general.print")))]),e._v(" "),t("button",{staticClass:"dropdown-item custom-dropdown",on:{click:e.pdf}},[t("i",{staticClass:"fas fa-file-pdf"}),e._v(" "+e._s(e.trans("general.generate_pdf")))])])]),e._v(" "),t("help-button",{on:{clicked:function(t){e.help_topic="reception.enquiry"}}})],1)])])]),e._v(" "),t("div",{staticClass:"container-fluid"},[t("transition",{attrs:{name:"fade"}},[e.showFilterPanel?t("div",{staticClass:"card card-form"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title"},[e._v(e._s(e.trans("general.filter")))]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.enquiry_type")))]),e._v(" "),t("v-select",{attrs:{label:"name","track-by":"id",name:"enquiry_type_id",id:"enquiry_type_id",options:e.enquiry_types,placeholder:e.trans("reception.select_enquiry_type"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_enquiry_types},on:{select:e.onEnquiryTypeSelect,remove:e.onEnquiryTypeRemove},model:{value:e.selected_enquiry_types,callback:function(t){e.selected_enquiry_types=t},expression:"selected_enquiry_types"}},[e.enquiry_types.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                        "+e._s(e.trans("general.no_option_found"))+"\n                                    ")])])],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.enquiry_source")))]),e._v(" "),t("v-select",{attrs:{label:"name","track-by":"id",name:"enquiry_source_id",id:"enquiry_source_id",options:e.enquiry_sources,placeholder:e.trans("reception.select_enquiry_source"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_enquiry_sources},on:{select:e.onEnquirySourceSelect,remove:e.onEnquirySourceRemove},model:{value:e.selected_enquiry_sources,callback:function(t){e.selected_enquiry_sources=t},expression:"selected_enquiry_sources"}},[e.enquiry_sources.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                        "+e._s(e.trans("general.no_option_found"))+"\n                                    ")])])],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("academic.institute")))]),e._v(" "),t("v-select",{attrs:{label:"name","track-by":"id",name:"institute_id",id:"institute_id",options:e.institutes,placeholder:e.trans("academic.select_institute"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_institutes},on:{select:e.onInstituteSelect,remove:e.onInstituteRemove},model:{value:e.selected_institutes,callback:function(t){e.selected_institutes=t},expression:"selected_institutes"}},[e.institutes.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                        "+e._s(e.trans("general.no_option_found"))+"\n                                    ")])])],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("reception.enquiry_status")))]),e._v(" "),t("v-select",{attrs:{label:"name","track-by":"id",name:"enquiry_status",id:"enquiry_status",options:e.enquiry_statuses,placeholder:e.trans("reception.select_enquiry_status"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_enquiry_statuses},on:{select:e.onEnquiryStatusSelect,remove:e.onEnquiryStatusRemove},model:{value:e.selected_enquiry_statuses,callback:function(t){e.selected_enquiry_statuses=t},expression:"selected_enquiry_statuses"}},[e.enquiry_statuses.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                        "+e._s(e.trans("general.no_option_found"))+"\n                                    ")])])],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("date-range-picker",{attrs:{"start-date":e.filter.date_of_enquiry_start_date,"end-date":e.filter.date_of_enquiry_end_date,label:e.trans("general.date_between")},on:{"update:startDate":function(t){return e.$set(e.filter,"date_of_enquiry_start_date",t)},"update:start-date":function(t){return e.$set(e.filter,"date_of_enquiry_start_date",t)},"update:endDate":function(t){return e.$set(e.filter,"date_of_enquiry_end_date",t)},"update:end-date":function(t){return e.$set(e.filter,"date_of_enquiry_end_date",t)}}})],1)]),e._v(" "),t("div",{staticClass:"card-footer text-right"},[t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){e.showFilterPanel=!1}}},[e._v(e._s(e.trans("general.cancel")))]),e._v(" "),t("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"button"},on:{click:e.getEnquiries}},[e._v(e._s(e.trans("general.filter")))])])])]):e._e()]),e._v(" "),e.hasPermission("create-enquiry")?t("transition",{attrs:{name:"fade"}},[e.showCreatePanel?t("div",{staticClass:"card card-form"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title"},[e._v(e._s(e.trans("reception.add_new_enquiry")))]),e._v(" "),t("enquiry-form",{on:{completed:e.getEnquiries,cancel:function(t){e.showCreatePanel=!e.showCreatePanel}}})],1)]):e._e()]):e._e(),e._v(" "),t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[e.enquiries.total?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm"},[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v(e._s(e.trans("reception.enquirer")))]),e._v(" "),t("th",[e._v(e._s(e.trans("reception.enquiry_type")))]),e._v(" "),t("th",[e._v(e._s(e.trans("reception.enquiry_source")))]),e._v(" "),t("th",[e._v(e._s(e.trans("reception.date_of_enquiry")))]),e._v(" "),t("th",[e._v(e._s(e.trans("student.contact_number")))]),e._v(" "),t("th",[e._v(e._s(e.trans("reception.no_of_students")))]),e._v(" "),t("th",[e._v(e._s(e.trans("reception.enquiry_status")))]),e._v(" "),t("th",[e._v(e._s(e.trans("reception.enquiry_remarks")))]),e._v(" "),t("th",{staticClass:"table-option"},[e._v(e._s(e.trans("general.action")))])])]),e._v(" "),t("tbody",e._l(e.enquiries.data,(function(r){return t("tr",[t("td",{domProps:{textContent:e._s(r.id)}}),e._v(" "),t("td",[r.first_guardian_name&&r.first_guardian_relation?t("span",[e._v(e._s(e.trans("list."+r.first_guardian_relation)+": "+r.first_guardian_name)+" "),t("br")]):e._e(),e._v(" "),r.second_guardian_name&&r.second_guardian_relation?t("span",[e._v(e._s(e.trans("list."+r.second_guardian_relation)+": "+r.second_guardian_name)+" "),t("br")]):e._e(),e._v(" "),r.third_guardian_name&&r.third_guardian_relation?t("span",[e._v(e._s(e.trans("list."+r.third_guardian_relation)+": "+r.third_guardian_name)+" "),t("br")]):e._e()]),e._v(" "),t("td",{domProps:{textContent:e._s(r.enquiry_type.name)}}),e._v(" "),t("td",{domProps:{textContent:e._s(r.enquiry_source.name)}}),e._v(" "),t("td",[e._v(e._s(e._f("moment")(r.date_of_enquiry)))]),e._v(" "),t("td",[r.contact_number?t("span",[e._v(e._s(e.trans("student.contact_number")+": "+r.contact_number)+" "),t("br")]):e._e(),e._v(" "),r.alternate_contact_number?t("span",[e._v(e._s(e.trans("student.alternate_contact_number")+": "+r.alternate_contact_number)+" "),t("br")]):e._e(),e._v(" "),r.email?t("span",[e._v(e._s(e.trans("student.email")+": "+r.email)+" "),t("br")]):e._e()]),e._v(" "),t("td",{domProps:{textContent:e._s(r.enquiry_details_count)}}),e._v(" "),t("td",e._l(e.getEnquiryStatus(r),(function(r){return t("span",{class:["label","label-"+r.color,"m-r-5"]},[e._v(e._s(r.label))])})),0),e._v(" "),t("td",{domProps:{textContent:e._s(r.remarks)}}),e._v(" "),t("td",{staticClass:"table-option"},[t("div",{staticClass:"btn-group"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.trans("reception.enquiry_detail"),expression:"trans('reception.enquiry_detail')"}],staticClass:"btn btn-success btn-sm",on:{click:function(t){return e.$router.push("/reception/enquiry/"+r.uuid)}}},[t("i",{staticClass:"fas fa-arrow-circle-right"})]),e._v(" "),e.hasPermission("edit-enquiry")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.trans("reception.edit_enquiry"),expression:"trans('reception.edit_enquiry')"}],staticClass:"btn btn-info btn-sm",on:{click:function(t){return t.preventDefault(),e.editEnquiry(r)}}},[t("i",{staticClass:"fas fa-edit"})]):e._e(),e._v(" "),e.hasPermission("delete-enquiry")?t("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:e.confirmDelete(r)},expression:"{ok: confirmDelete(enquiry)}"},{name:"tooltip",rawName:"v-tooltip",value:e.trans("reception.delete_enquiry"),expression:"trans('reception.delete_enquiry')"}],key:r.id,staticClass:"btn btn-danger btn-sm"},[t("i",{staticClass:"fas fa-trash"})]):e._e()])])])})),0)])]):e._e(),e._v(" "),e.enquiries.total?e._e():t("module-info",{attrs:{module:"reception",title:"enquiry_module_title",description:"enquiry_module_description",icon:"list"}},[t("div",{attrs:{slot:"btn"},slot:"btn"},[!e.showCreatePanel&&e.hasPermission("create-enquiry")?t("button",{staticClass:"btn btn-info btn-md",on:{click:function(t){e.showCreatePanel=!e.showCreatePanel}}},[t("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.trans("general.add_new")))]):e._e()])]),e._v(" "),t("pagination-record",{attrs:{"page-length":e.filter.page_length,records:e.enquiries},on:{"update:pageLength":function(t){return e.$set(e.filter,"page_length",t)},"update:page-length":function(t){return e.$set(e.filter,"page_length",t)},updateRecords:e.getEnquiries}})],1)])],1),e._v(" "),t("right-panel",{attrs:{topic:e.help_topic}})],1)}),[],!1,null,null,null);const a=i.exports}}]);