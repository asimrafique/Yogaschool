"use strict";(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[4692],{78268:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(94015),r=n.n(s),a=n(23645),i=n.n(a)()(r());i.push([e.id,".attendance-table tr th.date-cell{max-width:20px;min-width:20px;text-align:center}.attendance-table tr td{vertical-align:middle}.attendance-table tr td span.marking-cell{display:block;height:100%;text-align:center;width:100%}","",{version:3,sources:["webpack://./resources/js/views/employee/attendance/index.vue"],names:[],mappings:"AAgOA,kCAGA,cAAA,CADA,cAAA,CADA,iBAGA,CACA,wBACA,qBACA,CACA,0CACA,aAAA,CAEA,WAAA,CACA,iBAAA,CAFA,UAGA",sourcesContent:['<template>\r\n    <div>\r\n        <div class="page-titles">\r\n            <div class="row">\r\n                <div class="col-12 col-sm-6">\r\n                    <h3 class="text-themecolor">{{trans(\'employee.list_attendance\')}}</h3>\r\n                </div>\r\n                <div class="col-12 col-sm-6">\r\n                    <div class="action-buttons pull-right">\r\n                        <button class="btn btn-info btn-sm" @click="$router.push(\'/employee/attendance/regular\')"><i class="fas fa-check"></i> <span class="d-none d-sm-inline">{{trans(\'employee.mark_attendance\')}}</span></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="container-fluid">\r\n            <div class="card">\r\n                <div class="card-body p-4">\r\n                    <div class="row">\r\n                        <div class="col-12 col-sm-3">\r\n                            <div class="form-group">\r\n                                <label for="">{{trans(\'employee.category\')}}</label>\r\n                                <v-select label="name" track-by="id" v-model="selected_employee_categories" name="employee_category_id" id="employee_category_id" :options="employee_categories" :placeholder="trans(\'employee.select_employee_category\')" @select="onEmployeeCategorySelect" :multiple="true" :close-on-select="false" :clear-on-select="false" :hide-selected="true" @remove="onEmployeeCategoryRemove" :selected="selected_employee_categories">\r\n                                    <div class="multiselect__option" slot="afterList" v-if="!employee_categories.length">\r\n                                        {{trans(\'general.no_option_found\')}}\r\n                                    </div>\r\n                                </v-select>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-12 col-sm-3">\r\n                            <div class="form-group">\r\n                                <label for="">{{trans(\'employee.designation\')}}</label>\r\n                                <v-select label="name" track-by="id" v-model="selected_designations" name="designation_id" id="designation_id" :options="designations" :placeholder="trans(\'employee.select_designation\')" @select="onDesignationSelect" :multiple="true" :close-on-select="false" :clear-on-select="false" :hide-selected="true" @remove="onDesignationRemove" :selected="selected_designations">\r\n                                    <div class="multiselect__option" slot="afterList" v-if="!designations.length">\r\n                                        {{trans(\'general.no_option_found\')}}\r\n                                    </div>\r\n                                </v-select>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-12 col-sm-3">\r\n                            <div class="form-group">\r\n                                <label for="">{{trans(\'employee.department\')}}</label>\r\n                                <v-select label="name" track-by="id" v-model="selected_departments" name="department_id" id="department_id" :options="departments" :placeholder="trans(\'employee.select_department\')" @select="onDepartmentSelect" :multiple="true" :close-on-select="false" :clear-on-select="false" :hide-selected="true" @remove="onDepartmentRemove" :selected="selected_departments">\r\n                                    <div class="multiselect__option" slot="afterList" v-if="!departments.length">\r\n                                        {{trans(\'general.no_option_found\')}}\r\n                                    </div>\r\n                                </v-select>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-12 col-sm-3">\r\n                            <div class="form-group">\r\n                                <label for="">{{trans(\'employee.attendance_month\')}}</label>\r\n                                <vue-monthly-picker v-model="filter.month" name="month" :placeHolder="trans(\'employee.attendance_month\')" dateFormat="YYYY-MM "></vue-monthly-picker>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <button type="button" class="btn btn-info pull-right" @click="list">{{trans(\'general.filter\')}}</button>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="row m-t-20" v-if="employees.length">\r\n                        <div class="col-12">\r\n                            <div class="table-responsive font-90pc p-2">\r\n                                <table class="table table-sm table-bordered attendance-table">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>{{trans(\'employee.employee\')}}</th>\r\n                                            <th class="date-cell" v-for="index in days">{{index}}</th>\r\n                                            <th class="text-center font-weight-bold" v-for="attendance in attendance_summary_with_name" v-tooltip="attendance.name">\r\n                                                {{attendance.symbol}}\r\n                                            </th>\r\n                                        </tr>   \r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr v-for="employee in employees">\r\n                                            <td>\r\n                                                {{getEmployeeNameWithCode(employee)}} <br /> \r\n                                                <span class="font-90pc">{{getEmployeeDesignationOnDate(employee, date)}}</span>\r\n                                            </td>\r\n                                            <td :class="`text-center font-weight-bold text-${attendance.color}`" v-for="attendance in employee.attendances">\r\n                                                <span class="marking-cell" v-tooltip="attendance.description" v-if="attendance.symbol == \'H\'">\r\n                                                    <i class="fas fa-hospital-symbol"></i>\r\n                                                </span>\r\n                                                <span class="marking-cell" v-tooltip="attendance.description" v-else>\r\n                                                    {{attendance.symbol}}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td class="text-center font-weight-bold" v-for="attendance in attendance_summary_with_name">\r\n                                                {{getAttendanceSummary(employee, attendance.symbol)}}\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        components: {},\r\n        data(){\r\n            return {\r\n                filter: {\r\n                    department_id: [],\r\n                    designation_id: [],\r\n                    employee_category_id: [],\r\n                    month: \'\'\r\n                },\r\n                date: \'\',\r\n                days: 0,\r\n                employees: [],\r\n                departments: [],\r\n                designations: [],\r\n                employee_categories: [],\r\n                selected_designations: null,\r\n                selected_departments: null,\r\n                selected_employee_categories: null,\r\n                attendance_summary_with_name: []\r\n            }\r\n        },\r\n        mounted(){\r\n            this.filter.month = moment().format(\'YYYY-MM\');\r\n            this.getPreRequisite();\r\n        },\r\n        methods: {\r\n            hasPermission(permission){\r\n                return helper.hasPermission(permission);\r\n            },\r\n            getEmployeeNameWithCode(employee){\r\n                return helper.getEmployeeNameWithCode(employee);\r\n            },\r\n            getEmployeeDesignationOnDate(employee, date){\r\n                return helper.getEmployeeDesignationOnDate(employee, date);\r\n            },\r\n            getPreRequisite(){\r\n                let loader = this.$loading.show();\r\n                axios.get(\'/api/employee/attendance/regular/pre-requisite\')\r\n                    .then(response => {\r\n                        this.departments = response.departments;\r\n                        this.designations = response.designations;\r\n                        this.employee_categories = response.employee_categories;\r\n                        loader.hide();\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    })\r\n            },\r\n            list(){\r\n                let loader = this.$loading.show();\r\n                this.filter.month = moment(this.filter.month).format(\'YYYY-MM\');\r\n                axios.post(\'/api/employee/attendance/regular/list\',{\r\n                        department_id: this.filter.department_id,\r\n                        designation_id: this.filter.designation_id,\r\n                        employee_category_id: this.filter.employee_category_id,\r\n                        month: this.filter.month,\r\n                    })\r\n                    .then(response => {\r\n                        this.employees = response.employees;\r\n                        this.attendance_summary_with_name = response.attendance_summary_with_name;\r\n                        loader.hide();\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg();\r\n                    })\r\n            },\r\n            onDepartmentSelect(selectedOption){\r\n                this.filter.department_id.push(selectedOption.id);\r\n            },\r\n            onDepartmentRemove(removedOption){\r\n                this.filter.department_id.splice(this.filter.department_id.indexOf(removedOption.id), 1);\r\n            },\r\n            onDesignationSelect(selectedOption){\r\n                this.filter.designation_id.push(selectedOption.id);\r\n            },\r\n            onDesignationRemove(removedOption){\r\n                this.filter.designation_id.splice(this.filter.designation_id.indexOf(removedOption.id), 1);\r\n            },\r\n            onEmployeeCategorySelect(selectedOption){\r\n                this.filter.employee_category_id.push(selectedOption.id);\r\n            },\r\n            onEmployeeCategoryRemove(removedOption){\r\n                this.filter.employee_category_id.splice(this.filter.employee_category_id.indexOf(removedOption.id), 1);\r\n            },\r\n            getAttendanceSummary(employee, symbol){\r\n                let attendance = employee.summary.find(o => o.symbol == symbol);\r\n\r\n                if (typeof attendance == \'undefined\')\r\n                    return 0;\r\n\r\n                return attendance.value;\r\n            }\r\n        },\r\n        watch: {\r\n            \'filter.month\': function(val){\r\n                this.date = moment(val, \'YYYY-MM\')+\'-01\';\r\n                this.days = moment(val,\'YYYY-MM\').daysInMonth();\r\n            }\r\n        }\r\n    }\r\n<\/script>\r\n\r\n<style>\r\n    .attendance-table tr th.date-cell{\r\n        text-align: center;\r\n        min-width: 20px;\r\n        max-width: 20px;\r\n    }\r\n    .attendance-table tr td {\r\n        vertical-align: middle;\r\n    }\r\n    .attendance-table tr td span.marking-cell {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        text-align: center;\r\n    }\r\n</style>'],sourceRoot:""}]);const o=i},50935:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});const s={components:{},data:function(){return{filter:{department_id:[],designation_id:[],employee_category_id:[],month:""},date:"",days:0,employees:[],departments:[],designations:[],employee_categories:[],selected_designations:null,selected_departments:null,selected_employee_categories:null,attendance_summary_with_name:[]}},mounted:function(){this.filter.month=moment().format("YYYY-MM"),this.getPreRequisite()},methods:{hasPermission:function(e){return helper.hasPermission(e)},getEmployeeNameWithCode:function(e){return helper.getEmployeeNameWithCode(e)},getEmployeeDesignationOnDate:function(e,t){return helper.getEmployeeDesignationOnDate(e,t)},getPreRequisite:function(){var e=this,t=this.$loading.show();axios.get("/api/employee/attendance/regular/pre-requisite").then((function(n){e.departments=n.departments,e.designations=n.designations,e.employee_categories=n.employee_categories,t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},list:function(){var e=this,t=this.$loading.show();this.filter.month=moment(this.filter.month).format("YYYY-MM"),axios.post("/api/employee/attendance/regular/list",{department_id:this.filter.department_id,designation_id:this.filter.designation_id,employee_category_id:this.filter.employee_category_id,month:this.filter.month}).then((function(n){e.employees=n.employees,e.attendance_summary_with_name=n.attendance_summary_with_name,t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg()}))},onDepartmentSelect:function(e){this.filter.department_id.push(e.id)},onDepartmentRemove:function(e){this.filter.department_id.splice(this.filter.department_id.indexOf(e.id),1)},onDesignationSelect:function(e){this.filter.designation_id.push(e.id)},onDesignationRemove:function(e){this.filter.designation_id.splice(this.filter.designation_id.indexOf(e.id),1)},onEmployeeCategorySelect:function(e){this.filter.employee_category_id.push(e.id)},onEmployeeCategoryRemove:function(e){this.filter.employee_category_id.splice(this.filter.employee_category_id.indexOf(e.id),1)},getAttendanceSummary:function(e,t){var n=e.summary.find((function(e){return e.symbol==t}));return void 0===n?0:n.value}},watch:{"filter.month":function(e){this.date=moment(e,"YYYY-MM")+"-01",this.days=moment(e,"YYYY-MM").daysInMonth()}}},r=s;var a=n(93379),i=n.n(a),o=n(78268),l={insert:"head",singleton:!1};i()(o.Z,l);o.Z.locals;var d=(0,n(51900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"page-titles"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("h3",{staticClass:"text-themecolor"},[e._v(e._s(e.trans("employee.list_attendance")))])]),e._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"action-buttons pull-right"},[t("button",{staticClass:"btn btn-info btn-sm",on:{click:function(t){return e.$router.push("/employee/attendance/regular")}}},[t("i",{staticClass:"fas fa-check"}),e._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[e._v(e._s(e.trans("employee.mark_attendance")))])])])])])]),e._v(" "),t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body p-4"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.category")))]),e._v(" "),t("v-select",{attrs:{label:"name","track-by":"id",name:"employee_category_id",id:"employee_category_id",options:e.employee_categories,placeholder:e.trans("employee.select_employee_category"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_employee_categories},on:{select:e.onEmployeeCategorySelect,remove:e.onEmployeeCategoryRemove},model:{value:e.selected_employee_categories,callback:function(t){e.selected_employee_categories=t},expression:"selected_employee_categories"}},[e.employee_categories.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])])],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.designation")))]),e._v(" "),t("v-select",{attrs:{label:"name","track-by":"id",name:"designation_id",id:"designation_id",options:e.designations,placeholder:e.trans("employee.select_designation"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_designations},on:{select:e.onDesignationSelect,remove:e.onDesignationRemove},model:{value:e.selected_designations,callback:function(t){e.selected_designations=t},expression:"selected_designations"}},[e.designations.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])])],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.department")))]),e._v(" "),t("v-select",{attrs:{label:"name","track-by":"id",name:"department_id",id:"department_id",options:e.departments,placeholder:e.trans("employee.select_department"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_departments},on:{select:e.onDepartmentSelect,remove:e.onDepartmentRemove},model:{value:e.selected_departments,callback:function(t){e.selected_departments=t},expression:"selected_departments"}},[e.departments.length?e._e():t("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])])],1)]),e._v(" "),t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.attendance_month")))]),e._v(" "),t("vue-monthly-picker",{attrs:{name:"month",placeHolder:e.trans("employee.attendance_month"),dateFormat:"YYYY-MM "},model:{value:e.filter.month,callback:function(t){e.$set(e.filter,"month",t)},expression:"filter.month"}})],1)])]),e._v(" "),t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-info pull-right",attrs:{type:"button"},on:{click:e.list}},[e._v(e._s(e.trans("general.filter")))])]),e._v(" "),t("div",{staticClass:"clearfix"}),e._v(" "),e.employees.length?t("div",{staticClass:"row m-t-20"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"table-responsive font-90pc p-2"},[t("table",{staticClass:"table table-sm table-bordered attendance-table"},[t("thead",[t("tr",[t("th",[e._v(e._s(e.trans("employee.employee")))]),e._v(" "),e._l(e.days,(function(n){return t("th",{staticClass:"date-cell"},[e._v(e._s(n))])})),e._v(" "),e._l(e.attendance_summary_with_name,(function(n){return t("th",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.name,expression:"attendance.name"}],staticClass:"text-center font-weight-bold"},[e._v("\n                                            "+e._s(n.symbol)+"\n                                        ")])}))],2)]),e._v(" "),t("tbody",e._l(e.employees,(function(n){return t("tr",[t("td",[e._v("\n                                            "+e._s(e.getEmployeeNameWithCode(n))+" "),t("br"),e._v(" "),t("span",{staticClass:"font-90pc"},[e._v(e._s(e.getEmployeeDesignationOnDate(n,e.date)))])]),e._v(" "),e._l(n.attendances,(function(n){return t("td",{class:"text-center font-weight-bold text-".concat(n.color)},["H"==n.symbol?t("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.description,expression:"attendance.description"}],staticClass:"marking-cell"},[t("i",{staticClass:"fas fa-hospital-symbol"})]):t("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.description,expression:"attendance.description"}],staticClass:"marking-cell"},[e._v("\n                                                "+e._s(n.symbol)+"\n                                            ")])])})),e._v(" "),e._l(e.attendance_summary_with_name,(function(s){return t("td",{staticClass:"text-center font-weight-bold"},[e._v("\n                                            "+e._s(e.getAttendanceSummary(n,s.symbol))+"\n                                        ")])}))],2)})),0)])])])]):e._e()])])])])}),[],!1,null,null,null);const c=d.exports}}]);