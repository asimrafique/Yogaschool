"use strict";(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[8188],{47745:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});const a={components:{},data:function(){return{uuid:this.$route.params.uuid,leave_request:{},leave_allocation:{},attachments:[],leaveRequestDetailForm:new Form({status:null,comment:""}),statuses:[{text:i18n.employee.leave_request_status_pending,value:"pending"},{text:i18n.employee.leave_request_status_approved,value:"approved"},{text:i18n.employee.leave_request_status_rejected,value:"rejected"},{text:i18n.employee.leave_request_status_cancelled,value:"cancelled"}]}},mounted:function(){this.getLeaveRequest()},methods:{hasPermission:function(e){return helper.hasPermission(e)},getEmployeeName:function(e){return helper.getEmployeeName(e)},getEmployeeNameWithCode:function(e){return helper.getEmployeeNameWithCode(e)},getEmployeeCode:function(e){return helper.getEmployeeCode(e)},getEmployeeDesignationOnDate:function(e,t){return helper.getEmployeeDesignationOnDate(e,t)},getLeaveRequest:function(){var e=this,t=this.$loading.show();axios.get("/api/employee/leave/request/"+this.uuid).then((function(s){t.hide(),e.leave_request=s.leave_request,e.leave_allocation=s.leave_allocation,e.attachments=s.attachments,e.leaveRequestDetailForm.status=e.leave_request.status})).catch((function(s){t.hide(),helper.showErrorMsg(s),e.$router.push("/dashboard")}))},getLeaveRequestCount:function(e){var t=e.options.holidays.excluded||[];e.options.holidays.included;return helper.getDateDiff(e.start_date,e.end_date)+1-t.length},getLeaveRequestStatus:function(e){return helper.getLeaveRequestStatus(e)},submit:function(){var e=this,t=this.$loading.show();this.leaveRequestDetailForm.post("/api/employee/leave/request/"+this.uuid+"/status").then((function(s){toastr.success(s.message),e.getLeaveRequest(),e.leaveRequestDetailForm.status=e.leave_request.status,t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))}},filters:{moment:function(e){return helper.formatDate(e)},momentDateTime:function(e){return helper.formatDateTime(e)}},computed:{authToken:function(){return helper.getAuthToken()}}};const l=(0,s(51900).Z)(a,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"page-titles"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("h3",{staticClass:"text-themecolor"},[e._v(e._s(e.trans("employee.leave_request")+" #"+e.leave_request.id)+"\n                        "),e.leave_request.employee?t("span",{staticClass:"card-subtitle d-none d-sm-inline"},[e._v("("+e._s(e.getEmployeeName(e.leave_request.employee))+") ")]):e._e()])]),e._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"action-buttons pull-right"},[t("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/employee/leave/request"}},[t("i",{staticClass:"fas fa-list"}),e._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[e._v(e._s(e.trans("employee.leave_request")))])])],1)])])]),e._v(" "),t("div",{staticClass:"container-fluid"},[e.leave_request.id?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"card border-right"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title m-3"},[e._v(e._s(e.trans("employee.leave_request_detail")))]),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm custom-show-table"},[t("tbody",[t("tr",[t("td",[e._v(e._s(e.trans("employee.name")))]),e._v(" "),t("td",[e._v(e._s(e.getEmployeeName(e.leave_request.employee)))])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("employee.code")))]),e._v(" "),t("td",[e._v(e._s(e.getEmployeeCode(e.leave_request.employee)))])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("employee.designation")))]),e._v(" "),t("td",[e._v(e._s(e.getEmployeeDesignationOnDate(e.leave_request.employee,e.leave_request.end_date)))])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("employee.leave_request_period")))]),e._v(" "),t("td",[e._v(e._s(e._f("moment")(e.leave_request.start_date))+" "+e._s(e.trans("general.to"))+" "+e._s(e._f("moment")(e.leave_request.end_date)))])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("employee.leave_request_count")))]),e._v(" "),t("td",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.getLeaveRequestCount(e.leave_request))+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("employee.leave_request_status")))]),e._v(" "),t("td",e._l(e.getLeaveRequestStatus(e.leave_request),(function(s){return t("span",{class:["label","label-"+s.color,"m-r-5"]},[e._v(e._s(s.label))])})),0)]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("employee.leave_request_reason")))]),e._v(" "),t("td",[e._v(e._s(e.leave_request.reason))])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("employee.leave_requested_by")))]),e._v(" "),t("td",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.getEmployeeName(e.leave_request.requester_user.employee)+" ("+e.getEmployeeCode(e.leave_request.requester_user.employee)+")")+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("general.created_at")))]),e._v(" "),t("td",[e._v(e._s(e._f("momentDateTime")(e.leave_request.created_at)))])]),e._v(" "),t("tr",[t("td",[e._v(e._s(e.trans("general.updated_at")))]),e._v(" "),t("td",[e._v(e._s(e._f("momentDateTime")(e.leave_request.updated_at)))])])])])]),e._v(" "),e.attachments.length?t("div",{staticClass:"p-2 font-80pc"},[t("ul",{staticClass:"m-t-10 upload-file-list"},e._l(e.attachments,(function(s){return t("li",{staticClass:"upload-file-list-item"},[t("a",{staticClass:"no-link-color",attrs:{href:"/employee/leave/request/".concat(e.leave_request.uuid,"/attachment/").concat(s.uuid,"/download?token=").concat(e.authToken)}},[t("i",{class:["file-icon","fas","fa-lg",s.file_info.icon]}),e._v(" "),t("span",{staticClass:"upload-file-list-item-size"},[e._v(e._s(s.file_info.size))]),e._v(" "+e._s(s.user_filename))])])})),0)]):e._e(),e._v(" "),t("h4",{staticClass:"card-title m-3"},[e._v(e._s(e.trans("employee.leave_allocation")))]),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm custom-show-table"},[t("tbody",[t("tr",[t("td",[e._v(e._s(e.trans("employee.leave_allocation_period")))]),e._v(" "),t("td",[e._v(e._s(e._f("moment")(e.leave_allocation.start_date))+" "+e._s(e.trans("general.to"))+" "+e._s(e._f("moment")(e.leave_allocation.end_date)))])]),e._v(" "),e._l(e.leave_allocation.leave_allocation_details,(function(s){return t("tr",[t("td",[e._v(e._s(s.leave_type.name))]),e._v(" "),t("td",[e._v(e._s(s.used)+"/"+e._s(s.allotted))])])}))],2)])])])])]),e._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body border-right p-4"},[e.hasPermission("take-action-on-leave-request")?[t("form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)},keydown:function(t){return e.leaveRequestDetailForm.errors.clear(t.target.name)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.leave_request_status")))]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.leaveRequestDetailForm.status,expression:"leaveRequestDetailForm.status"}],staticClass:"custom-select col-12",attrs:{name:"status"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.leaveRequestDetailForm,"status",t.target.multiple?s:s[0])},function(t){return e.leaveRequestDetailForm.errors.clear("status")}]}},[t("option",{attrs:{value:"null"}},[e._v(e._s(e.trans("general.select_one")))]),e._v(" "),e._l(e.statuses,(function(s){return t("option",{domProps:{value:s.value}},[e._v("\n                                                    "+e._s(s.text)+"\n                                                  ")])}))],2),e._v(" "),t("show-error",{attrs:{"form-name":e.leaveRequestDetailForm,"prop-name":"status"}})],1)]),e._v(" "),t("div",{staticClass:"col-12"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.leave_request_comment")))]),e._v(" "),t("autosize-textarea",{attrs:{rows:"3",name:"comment",placeholder:e.trans("employee.leave_request_comment")},model:{value:e.leaveRequestDetailForm.comment,callback:function(t){e.$set(e.leaveRequestDetailForm,"comment",t)},expression:"leaveRequestDetailForm.comment"}}),e._v(" "),t("show-error",{attrs:{"form-name":e.leaveRequestDetailForm,"prop-name":"comment"}})],1)])]),e._v(" "),t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[e._v(e._s(e.trans("general.update")))])])])]:e._e(),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm"},[t("thead",[t("tr",[t("th",[e._v(e._s(e.trans("employee.status")))]),e._v(" "),t("th",[e._v(e._s(e.trans("employee.leave_request_comment")))]),e._v(" "),t("th",[e._v(e._s(e.trans("employee.leave_status_updated_by")))]),e._v(" "),t("th",[e._v(e._s(e.trans("general.updated_at")))])])]),e._v(" "),t("tbody",e._l(e.leave_request.leave_request_details,(function(s){return t("tr",[t("td",[e._v(e._s(e.trans("employee.leave_request_status_"+s.status)))]),e._v(" "),t("td",[e._v(e._s(s.comment))]),e._v(" "),t("td",[e._v(e._s(e.getEmployeeNameWithCode(s.approver_user.employee)))]),e._v(" "),t("td",[e._v(e._s(e._f("momentDateTime")(s.updated_at)))])])})),0)])])],2)])])]):e._e()])])}),[],!1,null,null,null).exports}}]);