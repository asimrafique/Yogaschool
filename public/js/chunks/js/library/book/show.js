"use strict";(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[3605],{61284:(t,o,s)=>{s.d(o,{Z:()=>n});var a=s(94015),r=s.n(a),e=s(23645),i=s.n(e)()(r());i.push([t.id,".loading-overlay.is-full-page{z-index:1060}","",{version:3,sources:["webpack://./resources/js/views/library/book/post-detail-edit.vue"],names:[],mappings:"AA8IA,8BACA,YACA",sourcesContent:['<template>\r\n    <transition name="modal">\r\n        <div class="modal-mask">\r\n            <div class="modal-wrapper">\r\n                <div class="modal-container modal-lg">\r\n                    <div class="modal-header">\r\n                        <slot name="header">\r\n                            {{trans(\'library.edit_book\')}}\r\n                            <span class="float-right pointer" @click="$emit(\'close\')">x</span>\r\n                        </slot>\r\n                    </div>\r\n                    <div class="modal-body">\r\n                        <slot name="body">\r\n\t\t\t\t\t\t    <form @submit.prevent="submit" @keydown="postDetailForm.errors.clear($event.target.name)">\r\n\t\t\t\t\t\t    \t<div class="row">\r\n\t\t\t\t\t\t        \t<div class="col-12 col-sm-4">\r\n\t\t\t\t\t\t                <div class="form-group">\r\n\t\t\t\t\t\t\t\t\t        <label for="">{{trans(\'library.book_number\')}}</label>\r\n\t\t\t\t\t\t                    <input class="form-control" type="number" v-model="postDetailForm.number" name="number" :placeholder="trans(\'library.book_number\')">\r\n\t\t\t\t\t\t                    <show-error :form-name="postDetailForm" prop-name="number"></show-error>\r\n\t\t\t\t\t\t                </div>\r\n\t\t\t\t\t\t        \t</div>\r\n\t\t\t\t\t\t        \t<div class="col-12 col-sm-4">\r\n\t\t\t\t\t\t                <div class="form-group">\r\n\t\t\t\t\t\t\t\t\t        <label for="">{{trans(\'library.book_location\')}}</label>\r\n\t\t\t\t\t\t                    <input class="form-control" type="text" v-model="postDetailForm.location" name="location" :placeholder="trans(\'library.book_location\')">\r\n\t\t\t\t\t\t                    <show-error :form-name="postDetailForm" prop-name="location"></show-error>\r\n\t\t\t\t\t\t                </div>\r\n\t\t\t\t\t\t        \t</div>\r\n\t\t\t\t\t\t        \t<div class="col-12 col-sm-4">\r\n\t\t\t\t\t\t                <div class="form-group">\r\n\t\t\t\t\t\t\t\t\t        <label for="">{{trans(\'library.book_condition\')}}</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<select v-model="postDetailForm.book_condition_id" class="custom-select col-12" name="book_condition_id" @change="postDetailForm.errors.clear(\'book_condition_id\')">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=null selected>{{trans(\'general.select_one\')}}</option>\r\n\t\t\t\t\t\t              \t\t\t<option v-for="condition in book_conditions" v-bind:value="condition.id">\r\n\t\t\t\t\t\t                        \t{{ condition.name }}\r\n\t\t\t\t\t\t                      \t</option>\r\n\t\t\t\t\t\t                    </select>\r\n\t\t\t\t\t\t                    <show-error :form-name="postDetailForm" prop-name="book_condition_id"></show-error>\r\n\t\t\t\t\t\t                </div>\r\n\t\t\t\t\t\t        \t</div>\r\n\t\t\t\t\t\t        \t<div class="col-4">\r\n\t\t\t\t\t\t        \t\t<div class="form-group">\r\n\t\t\t\t\t                        <label class="custom-control custom-checkbox">\r\n\t\t\t\t\t                            <input type="checkbox" class="custom-control-input" v-model="postDetailForm.is_not_available" value="1" name="is_not_available">\r\n\t\t\t\t\t                            <span class="custom-control-label">{{trans(\'library.book_not_available\')}}</span>\r\n\t\t\t\t\t                        </label>\r\n\t\t\t\t\t\t        \t\t</div>\r\n\t\t\t\t\t\t        \t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-8">\r\n\t\t\t\t\t\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t\t\t\t        <label for="">{{trans(\'library.book_post_detail_remarks\')}}</label>\r\n\t\t\t\t\t\t\t\t\t        <autosize-textarea v-model="postDetailForm.remarks" rows="1" name="remarks" :placeholder="trans(\'library.book_post_remarks\')"></autosize-textarea>\r\n\t\t\t\t\t\t\t\t\t        <show-error :form-name="postDetailForm" prop-name="remarks"></show-error>\r\n\t\t\t\t\t\t\t\t\t    </div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t    \t</div>\r\n\r\n\t\t\t\t\t\t    \t<div class="text-right">\r\n\r\n\t\t\t\t\t\t\t        <button type="button" class="btn btn-danger waves-effect waves-light m-r-10" @click="$emit(\'close\')">{{trans(\'general.cancel\')}}</button>\r\n\t\t\t\t\t\t\t        <button type="submit" class="btn btn-info waves-effect waves-light">{{trans(\'general.save\')}}</button>\r\n\t\t\t\t\t\t    \t\t\r\n\t\t\t\t\t\t    \t</div>\r\n\t\t\t\t\t\t    </form>\t\r\n\t\t\t\t\t\t    <div class="clearfix"></div>\r\n\t\t\t\t\t\t</slot>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</transition>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tprops: [\'book\',\'id\',\'bookPostId\'],\r\n\t\tdata(){\r\n\t\t\treturn  {\r\n\t\t\t\tpostDetailForm: new Form({\r\n\t\t\t\t\tnumber: \'\',\r\n\t\t\t\t\tbook_condition_id: \'\',\r\n\t\t\t\t\tlocation: \'\',\r\n\t\t\t\t\tremarks: \'\',\r\n\t\t\t\t\tis_not_available: 0\r\n\t\t\t\t}),\r\n\t\t\t\tbook_conditions: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.fillDetail();\r\n\t\t\tthis.getPreRequisite();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetPreRequisite(){\r\n\t\t\t\tlet loader = this.$loading.show();\r\n\t\t\t\taxios.get(\'/api/book/post/pre-requisite\')\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\tthis.book_conditions = response.book_conditions;\r\n\t\t\t\t\t\tloader.hide();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\thelper.showErrorMsg(error);\r\n\t\t\t\t\t\tloader.hide();\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfillDetail(){\r\n\t\t\t\tlet book_post = this.book.book_posts.find(o => o.id == this.bookPostId);\r\n\r\n\t\t\t\tif (! book_post)\r\n\t\t\t\t\tthis.$emit(\'close\');\r\n\r\n\t\t\t\tlet book_post_detail = book_post.book_post_details.find(o => o.id == this.id);\r\n\r\n\t\t\t\tif (! book_post_detail)\r\n\t\t\t\t\tthis.$emit(\'close\');\r\n\r\n\t\t\t\tthis.postDetailForm.number = book_post_detail.number;\r\n\t\t\t\tthis.postDetailForm.book_condition_id = book_post_detail.book_condition_id || \'\';\r\n\t\t\t\tthis.postDetailForm.location = book_post_detail.location;\r\n\t\t\t\tthis.postDetailForm.remarks = book_post_detail.remarks;\r\n\t\t\t\tthis.postDetailForm.is_not_available = book_post_detail.is_not_available;\r\n\t\t\t},\r\n\t\t\tsubmit(){\r\n\t\t\t\tlet loader = this.$loading.show();\r\n\t\t\t\tthis.postDetailForm.patch(\'/api/book/\'+this.book.uuid+\'/post/detail/\'+this.id)\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\ttoastr.success(response.message);\r\n\t\t\t\t\t\tthis.$emit(\'completed\');\r\n\t\t\t\t\t\tthis.$emit(\'close\');\r\n\t\t\t\t\t\tloader.hide();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tloader.hide();\r\n\t\t\t\t\t\thelper.showErrorMsg(error);\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n<\/script>\r\n\r\n<style>\r\n.loading-overlay.is-full-page{\r\n    z-index: 1060;\r\n}\r\n</style>'],sourceRoot:""}]);const n=i},19738:(t,o,s)=>{s.r(o),s.d(o,{default:()=>p});const a={components:{},props:{book:Object,lastBookNumber:Number},data:function(){return{bookPostForm:new Form({date_of_addition:"",quantity:"",addition_method:"",details:[],remarks:""}),book_conditions:[]}},mounted:function(){this.getPreRequisite()},methods:{getPreRequisite:function(){var t=this,o=this.$loading.show();axios.get("/api/book/post/pre-requisite").then((function(s){t.book_conditions=s.book_conditions,o.hide()})).catch((function(t){o.hide(),helper.showErrorMsg(t)}))},getNumberName:function(t){return t+"_number"},getLocationName:function(t){return t+"_location"},getConditionName:function(t){return t+"_condition"},submit:function(){var t=this,o=this.$loading.show();this.bookPostForm.post("/api/book/"+this.book.uuid+"/post").then((function(s){toastr.success(s.message),t.bookPostForm.details=[],t.$emit("completed"),o.hide()})).catch((function(t){o.hide(),helper.showErrorMsg(t)}))}},watch:{"bookPostForm.quantity":function(t){if((t=parseInt(t))>20)return this.bookPostForm.quantity=1,toastr.error(i18n.library.book_post_max_limit_crossed);this.bookPostForm.details=[];for(var o=this.lastBookNumber+t,s=this.lastBookNumber;s<o;s++)this.bookPostForm.details.push({number:s,location:"",book_condition_id:""})}}};var r=s(51900);const e=(0,r.Z)(a,(function(){var t=this,o=t._self._c;return o("div",[o("form",{on:{submit:function(o){return o.preventDefault(),t.submit.apply(null,arguments)},keydown:function(o){return t.bookPostForm.errors.clear(o.target.name)}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-6"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.date_of_addition")))]),t._v(" "),o("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("library.date_of_addition")},on:{selected:function(o){return t.bookPostForm.errors.clear("date_of_addition")}},model:{value:t.bookPostForm.date_of_addition,callback:function(o){t.$set(t.bookPostForm,"date_of_addition",o)},expression:"bookPostForm.date_of_addition"}}),t._v(" "),o("show-error",{attrs:{"form-name":t.bookPostForm,"prop-name":"date_of_addition"}})],1)]),t._v(" "),o("div",{staticClass:"col-12 col-sm-6"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_quantity")))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.bookPostForm.quantity,expression:"bookPostForm.quantity"}],staticClass:"form-control",attrs:{type:"text",name:"quantity",placeholder:t.trans("library.book_quantity")},domProps:{value:t.bookPostForm.quantity},on:{input:function(o){o.target.composing||t.$set(t.bookPostForm,"quantity",o.target.value)}}}),t._v(" "),o("show-error",{attrs:{"form-name":t.bookPostForm,"prop-name":"quantity"}})],1)])]),t._v(" "),t.bookPostForm.details.length?o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-4"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_number")))])]),t._v(" "),o("div",{staticClass:"col-12 col-sm-4"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_location")))])]),t._v(" "),o("div",{staticClass:"col-12 col-sm-4"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_condition")))])])]):t._e(),t._v(" "),t._l(t.bookPostForm.details,(function(s,a){return t.bookPostForm.details.length?o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-4"},[o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.number,expression:"detail.number"}],staticClass:"form-control",attrs:{type:"number",name:t.getNumberName(a),placeholder:t.trans("library.book_number")},domProps:{value:s.number},on:{input:function(o){o.target.composing||t.$set(s,"number",o.target.value)}}}),t._v(" "),o("show-error",{attrs:{"form-name":t.bookPostForm,"prop-name":t.getNumberName(a)}})],1)]),t._v(" "),o("div",{staticClass:"col-12 col-sm-4"},[o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:s.location,expression:"detail.location"}],staticClass:"form-control",attrs:{type:"text",name:t.getLocationName(a),placeholder:t.trans("library.book_location")},domProps:{value:s.location},on:{input:function(o){o.target.composing||t.$set(s,"location",o.target.value)}}}),t._v(" "),o("show-error",{attrs:{"form-name":t.bookPostForm,"prop-name":t.getLocationName(a)}})],1)]),t._v(" "),o("div",{staticClass:"col-12 col-sm-4"},[o("div",{staticClass:"form-group"},[o("select",{directives:[{name:"model",rawName:"v-model",value:s.book_condition_id,expression:"detail.book_condition_id"}],staticClass:"custom-select col-12",attrs:{name:t.getConditionName(a)},on:{change:function(o){var a=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(s,"book_condition_id",o.target.multiple?a:a[0])}}},[o("option",{attrs:{value:"null",selected:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.book_conditions,(function(s){return o("option",{domProps:{value:s.id}},[t._v("\n                            \t"+t._s(s.name)+"\n                          \t")])}))],2),t._v(" "),o("show-error",{attrs:{"form-name":t.bookPostForm,"prop-name":t.getConditionName(a)}})],1)])]):t._e()})),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_post_remarks")))]),t._v(" "),o("autosize-textarea",{attrs:{rows:"1",name:"remarks",placeholder:t.trans("library.book_post_remarks")},model:{value:t.bookPostForm.remarks,callback:function(o){t.$set(t.bookPostForm,"remarks",o)},expression:"bookPostForm.remarks"}}),t._v(" "),o("show-error",{attrs:{"form-name":t.bookPostForm,"prop-name":"remarks"}})],1)])]),t._v(" "),o("div",{staticClass:"card-footer text-right"},[o("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])],2)])}),[],!1,null,null,null).exports;const i={props:["book"],data:function(){return{}},mounted:function(){},methods:{hasPermission:function(t){return helper.hasPermission(t)},confirmDelete:function(t){var o=this;return function(s){return o.deleteBookPost(t)}},deleteBookPost:function(t){var o=this,s=this.$loading.show();axios.delete("/api/book/"+this.book.uuid+"/post/"+t.id).then((function(t){toastr.success(t.message),o.$emit("completed"),s.hide()})).catch((function(t){s.hide(),helper.showErrorMsg(t)}))}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}}};const n=(0,r.Z)(i,(function(){var t=this,o=t._self._c;return t.book.id?o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table table-sm"},[o("thead",[o("tr",[o("th",[t._v(t._s(t.trans("library.date_of_addition")))]),t._v(" "),o("th",[t._v(t._s(t.trans("library.book_quantity")))]),t._v(" "),o("th",[t._v(t._s(t.trans("library.book_post_remarks")))]),t._v(" "),o("th",{staticClass:"table-option"},[t._v(t._s(t.trans("general.action")))])])]),t._v(" "),o("tbody",t._l(t.book.book_posts,(function(s){return o("tr",[o("td",[t._v(t._s(t._f("moment")(s.date_of_addition)))]),t._v(" "),o("td",[t._v(t._s(s.quantity))]),t._v(" "),o("td",[t._v(t._s(s.remarks))]),t._v(" "),o("td",{staticClass:"table-option"},[o("div",{staticClass:"btn-group"},[t.hasPermission("delete-book")?o("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:t.confirmDelete(s)},expression:"{ok: confirmDelete(book_post)}"},{name:"tooltip",rawName:"v-tooltip",value:t.trans("library.delete_book_post"),expression:"trans('library.delete_book_post')"}],key:s.id,staticClass:"btn btn-danger btn-sm"},[o("i",{staticClass:"fas fa-trash"})]):t._e()])])])})),0)])]):t._e()}),[],!1,null,null,null).exports;const l={props:["book","id","bookPostId"],data:function(){return{postDetailForm:new Form({number:"",book_condition_id:"",location:"",remarks:"",is_not_available:0}),book_conditions:[]}},mounted:function(){this.fillDetail(),this.getPreRequisite()},methods:{getPreRequisite:function(){var t=this,o=this.$loading.show();axios.get("/api/book/post/pre-requisite").then((function(s){t.book_conditions=s.book_conditions,o.hide()})).catch((function(t){helper.showErrorMsg(t),o.hide()}))},fillDetail:function(){var t=this,o=this.book.book_posts.find((function(o){return o.id==t.bookPostId}));o||this.$emit("close");var s=o.book_post_details.find((function(o){return o.id==t.id}));s||this.$emit("close"),this.postDetailForm.number=s.number,this.postDetailForm.book_condition_id=s.book_condition_id||"",this.postDetailForm.location=s.location,this.postDetailForm.remarks=s.remarks,this.postDetailForm.is_not_available=s.is_not_available},submit:function(){var t=this,o=this.$loading.show();this.postDetailForm.patch("/api/book/"+this.book.uuid+"/post/detail/"+this.id).then((function(s){toastr.success(s.message),t.$emit("completed"),t.$emit("close"),o.hide()})).catch((function(t){o.hide(),helper.showErrorMsg(t)}))}}};var c=s(93379),d=s.n(c),_=s(61284),m={insert:"head",singleton:!1};d()(_.Z,m);_.Z.locals;const b={components:{bookPostDetailEdit:(0,r.Z)(l,(function(){var t=this,o=t._self._c;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container modal-lg"},[o("div",{staticClass:"modal-header"},[t._t("header",(function(){return[t._v("\n                            "+t._s(t.trans("library.edit_book"))+"\n                            "),o("span",{staticClass:"float-right pointer",on:{click:function(o){return t.$emit("close")}}},[t._v("x")])]}))],2),t._v(" "),o("div",{staticClass:"modal-body"},[t._t("body",(function(){return[o("form",{on:{submit:function(o){return o.preventDefault(),t.submit.apply(null,arguments)},keydown:function(o){return t.postDetailForm.errors.clear(o.target.name)}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_number")))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.postDetailForm.number,expression:"postDetailForm.number"}],staticClass:"form-control",attrs:{type:"number",name:"number",placeholder:t.trans("library.book_number")},domProps:{value:t.postDetailForm.number},on:{input:function(o){o.target.composing||t.$set(t.postDetailForm,"number",o.target.value)}}}),t._v(" "),o("show-error",{attrs:{"form-name":t.postDetailForm,"prop-name":"number"}})],1)]),t._v(" "),o("div",{staticClass:"col-12 col-sm-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_location")))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.postDetailForm.location,expression:"postDetailForm.location"}],staticClass:"form-control",attrs:{type:"text",name:"location",placeholder:t.trans("library.book_location")},domProps:{value:t.postDetailForm.location},on:{input:function(o){o.target.composing||t.$set(t.postDetailForm,"location",o.target.value)}}}),t._v(" "),o("show-error",{attrs:{"form-name":t.postDetailForm,"prop-name":"location"}})],1)]),t._v(" "),o("div",{staticClass:"col-12 col-sm-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_condition")))]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.postDetailForm.book_condition_id,expression:"postDetailForm.book_condition_id"}],staticClass:"custom-select col-12",attrs:{name:"book_condition_id"},on:{change:[function(o){var s=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.postDetailForm,"book_condition_id",o.target.multiple?s:s[0])},function(o){return t.postDetailForm.errors.clear("book_condition_id")}]}},[o("option",{attrs:{value:"null",selected:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.book_conditions,(function(s){return o("option",{domProps:{value:s.id}},[t._v("\n\t\t\t\t\t\t                        \t"+t._s(s.name)+"\n\t\t\t\t\t\t                      \t")])}))],2),t._v(" "),o("show-error",{attrs:{"form-name":t.postDetailForm,"prop-name":"book_condition_id"}})],1)]),t._v(" "),o("div",{staticClass:"col-4"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"custom-control custom-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.postDetailForm.is_not_available,expression:"postDetailForm.is_not_available"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"1",name:"is_not_available"},domProps:{checked:Array.isArray(t.postDetailForm.is_not_available)?t._i(t.postDetailForm.is_not_available,"1")>-1:t.postDetailForm.is_not_available},on:{change:function(o){var s=t.postDetailForm.is_not_available,a=o.target,r=!!a.checked;if(Array.isArray(s)){var e=t._i(s,"1");a.checked?e<0&&t.$set(t.postDetailForm,"is_not_available",s.concat(["1"])):e>-1&&t.$set(t.postDetailForm,"is_not_available",s.slice(0,e).concat(s.slice(e+1)))}else t.$set(t.postDetailForm,"is_not_available",r)}}}),t._v(" "),o("span",{staticClass:"custom-control-label"},[t._v(t._s(t.trans("library.book_not_available")))])])])]),t._v(" "),o("div",{staticClass:"col-8"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[t._v(t._s(t.trans("library.book_post_detail_remarks")))]),t._v(" "),o("autosize-textarea",{attrs:{rows:"1",name:"remarks",placeholder:t.trans("library.book_post_remarks")},model:{value:t.postDetailForm.remarks,callback:function(o){t.$set(t.postDetailForm,"remarks",o)},expression:"postDetailForm.remarks"}}),t._v(" "),o("show-error",{attrs:{"form-name":t.postDetailForm,"prop-name":"remarks"}})],1)])]),t._v(" "),o("div",{staticClass:"text-right"},[o("button",{staticClass:"btn btn-danger waves-effect waves-light m-r-10",attrs:{type:"button"},on:{click:function(o){return t.$emit("close")}}},[t._v(t._s(t.trans("general.cancel")))]),t._v(" "),o("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])]),t._v(" "),o("div",{staticClass:"clearfix"})]}))],2)])])])])}),[],!1,null,null,null).exports},props:["book"],data:function(){return{showEditModal:!1,editId:"",editBookPostId:""}},mounted:function(){},methods:{hasPermission:function(t){return helper.hasPermission(t)},editBook:function(t){this.showEditModal=!0,this.editId=t.id,this.editBookPostId=t.book_post_id},confirmDelete:function(t){var o=this;return function(s){return o.deleteBookPostDetail(t)}},deleteBookPostDetail:function(t){var o=this,s=this.$loading.show();axios.delete("/api/book/"+this.book.uuid+"/post/detail/"+t.id).then((function(t){toastr.success(t.message),o.$emit("completed"),s.hide()})).catch((function(t){s.hide(),helper.showErrorMsg(t)}))}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}}};const u={components:{bookPostForm:e,bookPostList:n,bookPostDetail:(0,r.Z)(b,(function(){var t=this,o=t._self._c;return o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table table-sm"},[o("thead",[o("tr",[o("th",[t._v(t._s(t.trans("library.book_number")))]),t._v(" "),o("th",[t._v(t._s(t.trans("library.book_location")))]),t._v(" "),o("th",[t._v(t._s(t.trans("library.book_condition")))]),t._v(" "),o("th",[t._v(t._s(t.trans("library.book_availability")))]),t._v(" "),o("th",[t._v(t._s(t.trans("library.book_post_detail_remarks")))]),t._v(" "),o("th",{staticClass:"table-option"},[t._v(t._s(t.trans("general.action")))])])]),t._v(" "),o("tbody",[t._l(t.book.book_posts,(function(s){return t._l(s.book_post_details,(function(s){return o("tr",[o("td",[t._v(t._s(s.number))]),t._v(" "),o("td",[t._v(t._s(s.location))]),t._v(" "),o("td",[s.book_condition_id?o("span",[t._v(t._s(s.book_condition.name))]):o("span",[t._v("-")])]),t._v(" "),o("td",[s.is_not_available?o("span",[o("i",{staticClass:"fas fa-times"})]):o("span",[o("i",{staticClass:"fas fa-check"})])]),t._v(" "),o("td",[t._v(t._s(s.remarks))]),t._v(" "),o("td",{staticClass:"table-option"},[o("div",{staticClass:"btn-group"},[t.hasPermission("edit-book")?o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("library.edit_book"),expression:"trans('library.edit_book')"}],staticClass:"btn btn-info btn-sm",on:{click:function(o){return o.preventDefault(),t.editBook(s)}}},[o("i",{staticClass:"fas fa-edit"})]):t._e(),t._v(" "),t.hasPermission("delete-book")?o("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:t.confirmDelete(s)},expression:"{ok: confirmDelete(book_post_detail)}"},{name:"tooltip",rawName:"v-tooltip",value:t.trans("library.delete_book"),expression:"trans('library.delete_book')"}],key:s.id,staticClass:"btn btn-danger btn-sm"},[o("i",{staticClass:"fas fa-trash"})]):t._e()])])])}))}))],2)]),t._v(" "),t.showEditModal?o("book-post-detail-edit",{attrs:{book:t.book,"book-post-id":t.editBookPostId,id:t.editId},on:{close:function(o){t.showEditModal=!1},completed:function(o){return t.$emit("completed")}}}):t._e()],1)}),[],!1,null,null,null).exports},data:function(){return{uuid:this.$route.params.uuid,book:{},last_book_number:0,tab:""}},mounted:function(){this.get()},methods:{hasPermission:function(t){return helper.hasPermission(t)},get:function(){var t=this,o=this.$loading.show();axios.get("/api/book/"+this.uuid).then((function(s){t.book=s.book,t.last_book_number=s.last_book_number,o.hide()})).catch((function(t){o.hide(),helper.showErrorMsg(t)}))},formatCurrency:function(t){return helper.formatCurrency(t)}},computed:{getQuantity:function(){var t=0;return this.book.book_posts.forEach((function(o){t+=o.book_post_details.length})),t}}};const p=(0,r.Z)(u,(function(){var t=this,o=t._self._c;return t.book.id?o("div",[o("div",{staticClass:"page-titles"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-6"},[o("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("library.book_detail"))+"\n                    "),o("span",{staticClass:"card-subtitle"},[t._v(t._s("#"+t.book.id))])])]),t._v(" "),o("div",{staticClass:"col-12 col-sm-6"},[o("div",{staticClass:"action-buttons pull-right"},[o("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/library/book"}},[o("i",{staticClass:"fas fa-list"}),t._v(" "),o("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("library.book")))])])],1)])])]),t._v(" "),o("div",{staticClass:"container-fluid"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-8 p-0"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("div",{attrs:{id:"accordion"}},[t.hasPermission("edit-book")?o("div",{staticClass:"card"},[o("div",{staticClass:"card-header collapsed",attrs:{id:"post","data-toggle":"collapse","data-target":"#collapsePost","aria-expanded":"false","aria-controls":"collapsePost"},on:{click:function(o){t.tab="post"}}},[o("h5",[o("i",{staticClass:"fas fa-lg fa-book fa-fix-w-32"}),t._v(" "+t._s(t.trans("library.add_more_book")))])]),t._v(" "),o("div",{staticClass:"collapse",attrs:{id:"collapsePost","aria-labelledby":"post","data-parent":"#accordion"}},[o("div",{staticClass:"card-body"},["post"==t.tab?o("book-post-form",{attrs:{book:t.book,"last-book-number":t.last_book_number},on:{completed:t.get}}):t._e()],1)])]):t._e(),t._v(" "),t.hasPermission("edit-book")?o("div",{staticClass:"card"},[o("div",{staticClass:"card-header collapsed",attrs:{id:"post-list","data-toggle":"collapse","data-target":"#collapseListPost","aria-expanded":"false","aria-controls":"collapseListPost"},on:{click:function(o){t.tab="post-list"}}},[o("h5",[o("i",{staticClass:"fas fa-lg fa-book-open fa-fix-w-32"}),t._v(" "+t._s(t.trans("library.list_book_addition")))])]),t._v(" "),o("div",{staticClass:"collapse",attrs:{id:"collapseListPost","aria-labelledby":"post","data-parent":"#accordion"}},[o("div",{staticClass:"card-body"},["post-list"==t.tab?o("book-post-list",{attrs:{book:t.book},on:{completed:t.get}}):t._e()],1)])]):t._e(),t._v(" "),o("div",{staticClass:"card"},[o("div",{staticClass:"card-header collapsed",attrs:{id:"post-detail","data-toggle":"collapse","data-target":"#collapseListPostDetail","aria-expanded":"false","aria-controls":"collapseListPostDetail"},on:{click:function(o){t.tab="post-detail"}}},[o("h5",[o("i",{staticClass:"fas fa-lg fa-swatchbook fa-fix-w-32"}),t._v(" "+t._s(t.trans("library.list_book")))])]),t._v(" "),o("div",{staticClass:"collapse",attrs:{id:"collapseListPostDetail","aria-labelledby":"post","data-parent":"#accordion"}},[o("div",{staticClass:"card-body"},["post-detail"==t.tab?o("book-post-detail",{attrs:{book:t.book},on:{completed:t.get}}):t._e()],1)])])])])])]),t._v(" "),o("div",{staticClass:"col-12 col-sm-4 p-l-0 border-left"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table table-sm custom-show-table"},[o("tbody",[o("tr",[o("td",[t._v(t._s(t.trans("library.book_title")))]),t._v(" "),o("td",{staticStyle:{width:"60%"}},[t._v(t._s(t.book.title))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_isbn_number")))]),t._v(" "),o("td",[t._v(t._s(t.book.isbn_number))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_author")))]),t._v(" "),o("td",[t._v(t._s(t.book.book_author_id?t.book.book_author.name:""))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_language")))]),t._v(" "),o("td",[t._v(t._s(t.book.book_language_id?t.book.book_language.name:""))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_topic")))]),t._v(" "),o("td",[t._v(t._s(t.book.book_topic_id?t.book.book_topic.name:""))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_publisher")))]),t._v(" "),o("td",[t._v(t._s(t.book.book_publisher_id?t.book.book_publisher.name:""))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_edition")))]),t._v(" "),o("td",[t._v(t._s(t.book.edition))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_type")))]),t._v(" "),o("td",[t._v(t._s(t.trans("library.book_type_"+t.book.type)))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_page")))]),t._v(" "),o("td",[t._v(t._s(t.book.page))])]),t._v(" "),o("tr",{staticClass:"highlight"},[o("td",[t._v(t._s(t.trans("library.book_quantity")))]),t._v(" "),o("td",[t._v(t._s(t.getQuantity))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_price")))]),t._v(" "),o("td",[t._v(t._s(t.formatCurrency(t.book.price)))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_summary")))]),t._v(" "),o("td",[t._v(t._s(t.book.summary))])]),t._v(" "),o("tr",[o("td",[t._v(t._s(t.trans("library.book_description")))]),t._v(" "),o("td",[t._v(t._s(t.book.description))])])])])])])])])])])]):t._e()}),[],!1,null,null,null).exports}}]);