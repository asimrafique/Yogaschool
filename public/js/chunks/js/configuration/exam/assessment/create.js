"use strict";(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[745],{62984:(s,e,t)=>{t.r(e),t.d(e,{default:()=>n});const a={components:{assessmentForm:t(58245).Z},data:function(){return{}},mounted:function(){helper.hasPermission("access-configuration")||(helper.notAccessibleMsg(),this.$router.push("/dashboard"))},methods:{},computed:{},filters:{},watch:{}};const n=(0,t(51900).Z)(a,(function(){var s=this,e=s._self._c;return e("div",[e("div",{staticClass:"page-titles"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-6"},[e("h3",{staticClass:"text-themecolor"},[s._v(s._s(s.trans("exam.add_new_assessment")))])]),s._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"action-buttons pull-right"},[e("button",{staticClass:"btn btn-info btn-sm",on:{click:function(e){return s.$router.push("/configuration/exam/assessment")}}},[e("i",{staticClass:"fas fa-list"}),s._v(" "),e("span",{staticClass:"d-none d-sm-inline"},[s._v(s._s(s.trans("exam.assessment")))])])])])])]),s._v(" "),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"card card-form"},[e("div",{staticClass:"card-body p-t-20"},[e("assessment-form")],1)])])])}),[],!1,null,null,null).exports},58245:(s,e,t)=>{t.d(e,{Z:()=>n});const a={components:{},data:function(){return{assessmentForm:new Form({name:"",description:"",details:[]})}},props:["id"],mounted:function(){helper.hasPermission("access-configuration")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.id?this.get():this.addRow()},methods:{hasPermission:function(s){return helper.hasPermission(s)},addRow:function(){this.assessmentForm.details.push({name:"",code:"",max_mark:"",pass_percentage:"",description:""})},confirmDeleteDetail:function(s){var e=this;return function(t){return e.deleteDetail(s)}},deleteDetail:function(s){this.assessmentForm.details.splice(s,1)},getDetailName:function(s){return s+"_detail_name"},getDetailCode:function(s){return s+"_detail_code"},getDetailMaxMarkName:function(s){return s+"_detail_max_mark"},getDetailPassPercentageName:function(s){return s+"_detail_pass_percentage"},getDetailDescriptionName:function(s){return s+"_detail_description"},proceed:function(){this.id?this.update():this.store()},store:function(){var s=this,e=this.$loading.show();this.assessmentForm.post("/api/exam/assessment").then((function(t){toastr.success(t.message),s.assessmentForm.details=[],s.addRow(),s.$emit("completed"),e.hide()})).catch((function(s){e.hide(),helper.showErrorMsg(s)}))},get:function(){var s=this,e=this.$loading.show();axios.get("/api/exam/assessment/"+this.id).then((function(t){s.assessmentForm.name=t.name,s.assessmentForm.description=t.description,t.details.forEach((function(e){s.assessmentForm.details.push({name:e.name,code:e.code,max_mark:e.max_mark,pass_percentage:e.pass_percentage,description:e.description})})),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t),s.$router.push("/configuration/exam/assessment")}))},update:function(){var s=this,e=this.$loading.show();this.assessmentForm.patch("/api/exam/assessment/"+this.id).then((function(t){toastr.success(t.message),e.hide(),s.$router.push("/configuration/exam/assessment")})).catch((function(s){e.hide(),helper.showErrorMsg(s)}))}}};const n=(0,t(51900).Z)(a,(function(){var s=this,e=s._self._c;return e("div",[e("form",{on:{submit:function(e){return e.preventDefault(),s.proceed.apply(null,arguments)},keydown:function(e){return s.assessmentForm.errors.clear(e.target.name)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_name")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.assessmentForm.name,expression:"assessmentForm.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:s.trans("exam.assessment_name")},domProps:{value:s.assessmentForm.name},on:{input:function(e){e.target.composing||s.$set(s.assessmentForm,"name",e.target.value)}}}),s._v(" "),e("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":"name"}})],1)]),s._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_description")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.assessmentForm.description,expression:"assessmentForm.description"}],staticClass:"form-control",attrs:{type:"text",name:"description",placeholder:s.trans("exam.assessment_description")},domProps:{value:s.assessmentForm.description},on:{input:function(e){e.target.composing||s.$set(s.assessmentForm,"description",e.target.value)}}}),s._v(" "),e("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":"description"}})],1)])]),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h6",{staticClass:"card-title"},[s._v(s._s(s.trans("exam.assessment_type")))]),s._v(" "),s._l(s.assessmentForm.details,(function(t,a){return[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_name"))+" \n                                "),e("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:s.confirmDeleteDetail(a)},expression:"{ok: confirmDeleteDetail(index)}"},{name:"tooltip",rawName:"v-tooltip",value:s.trans("general.delete"),expression:"trans('general.delete')"}],key:"".concat(a,"_delete_detail"),staticClass:"btn btn-xs btn-danger m-l-20",attrs:{type:"button"}},[e("i",{staticClass:"fas fa-times"})])]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"detail.name"}],staticClass:"form-control",attrs:{type:"text",name:s.getDetailName(a),placeholder:s.trans("exam.assessment_detail_name")},domProps:{value:t.name},on:{input:function(e){e.target.composing||s.$set(t,"name",e.target.value)}}}),s._v(" "),e("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailName(a)}})],1)]),s._v(" "),e("div",{staticClass:"col-12 col-sm-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_code")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"detail.code"}],staticClass:"form-control",attrs:{type:"text",name:s.getDetailCode(a),placeholder:s.trans("exam.assessment_detail_code")},domProps:{value:t.code},on:{input:function(e){e.target.composing||s.$set(t,"code",e.target.value)}}}),s._v(" "),e("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailCode(a)}})],1)]),s._v(" "),e("div",{staticClass:"col-12 col-sm-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_max_mark")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.max_mark,expression:"detail.max_mark"}],staticClass:"form-control",attrs:{type:"number",name:s.getDetailMaxMarkName(a),placeholder:s.trans("exam.assessment_detail_max_mark")},domProps:{value:t.max_mark},on:{input:function(e){e.target.composing||s.$set(t,"max_mark",e.target.value)}}}),s._v(" "),e("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailMaxMarkName(a)}})],1)]),s._v(" "),e("div",{staticClass:"col-12 col-sm-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_pass_percentage")))]),s._v(" "),e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pass_percentage,expression:"detail.pass_percentage"}],staticClass:"form-control",attrs:{type:"number",name:s.getDetailPassPercentageName(a),placeholder:s.trans("exam.assessment_detail_pass_percentage")},domProps:{value:t.pass_percentage},on:{input:function(e){e.target.composing||s.$set(t,"pass_percentage",e.target.value)}}}),s._v(" "),s._m(0,!0)]),s._v(" "),e("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailPassPercentageName(a)}})],1)]),s._v(" "),e("div",{staticClass:"col-12 col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_description")))]),s._v(" "),e("autosize-textarea",{attrs:{rows:"2",name:s.getDetailDescriptionName(a),placeholder:s.trans("resource.assessment_detail_description")},model:{value:t.description,callback:function(e){s.$set(t,"description",e)},expression:"detail.description"}}),s._v(" "),e("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailDescriptionName(a)}})],1)])])]})),s._v(" "),e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-info btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:s.addRow}},[s._v(s._s(s.trans("exam.add_new_assessment_detail")))])])],2)]),s._v(" "),e("div",{staticClass:"card-footer text-right"},[e("router-link",{staticClass:"btn btn-danger waves-effect waves-light",attrs:{to:"/configuration/exam/assessment"}},[s._v(s._s(s.trans("general.cancel")))]),s._v(" "),e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[s.id?e("span",[s._v(s._s(s.trans("general.update")))]):e("span",[s._v(s._s(s.trans("general.save")))])])],1)])])}),[function(){var s=this._self._c;return s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[this._v("%")])])}],!1,null,null,null).exports}}]);