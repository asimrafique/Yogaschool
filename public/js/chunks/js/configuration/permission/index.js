"use strict";(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[5349],{56016:(s,t,e)=>{e.r(t),e.d(t,{default:()=>o});const i={data:function(){return{roles:[],permissions:[],modules:[],assigned_permissions:[],permissionForm:new Form({roles:[]},!1),help_topic:""}},mounted:function(){helper.hasRole("admin")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.getPreRequisite()},methods:{getPreRequisite:function(){var s=this,t=this.$loading.show();axios.get("/api/permission/pre-requisite").then((function(e){s.roles=e.roles,s.permissions=e.permissions,s.assigned_permissions=e.assigned_permissions,s.modules=e.modules,s.roles.forEach((function(t){var e=s.assigned_permissions.find((function(s){return s.role==t.name}));s.permissionForm.roles.push({name:t.name,permissions:"undefined"!=e?e.permissions:[]})})),t.hide()})).catch((function(s){t.hide(),helper.showErrorMsg(s)}))},getConfig:function(s){return helper.getConfig(s)},toWord:function(s){return helper.toWord(s)},submit:function(){var s=this.$loading.show();this.permissionForm.post("/api/permission").then((function(t){toastr.success(t.message),s.hide()})).catch((function(t){s.hide(),helper.showErrorMsg(t)}))},getDefaultRole:function(s){return helper.getDefaultRole(s)}}};var n=(0,e(51900).Z)(i,(function(){var s=this,t=s._self._c;return t("div",[t("div",{staticClass:"page-titles"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("h3",{staticClass:"text-themecolor"},[s._v(s._s(s.trans("configuration.assign_permission")))])]),s._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"action-buttons pull-right"},[t("div",{staticClass:"btn-group"},[t("button",{staticClass:"btn btn-info btn-sm dropdown-toggle no-caret",attrs:{type:"button",role:"menu",id:"moduleLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-boxes"}),s._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[s._v(s._s(s.trans("configuration.locale_module"))+" "),t("i",{staticClass:"fas fa-chevron-down"})])]),s._v(" "),t("div",{class:["dropdown-menu","ltr"==s.getConfig("direction")?"dropdown-menu-right":""],attrs:{"aria-labelledby":"moduleLink"}},s._l(s.modules,(function(e){return t("button",{staticClass:"dropdown-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return s.$router.push("/configuration/permission/"+e)}}},[s._v("\n                                "+s._s(s.trans(e+"."+e))+" \n                            ")])})),0)]),s._v(" "),t("help-button",{on:{clicked:function(t){s.help_topic="configuration.permission"}}})],1)])])]),s._v(" "),t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body p-4"},[t("div",{staticClass:"table-responsive m-b-20"},[t("form",{on:{submit:function(t){return t.preventDefault(),s.proceed.apply(null,arguments)},keydown:function(t){return s.permissionForm.errors.clear(t.target.name)}}},[t("table",{staticClass:"table table-hover"},[t("thead",[t("tr",[t("th",[s._v(s._s(s.trans("configuration.permission")))]),s._v(" "),s._l(s.permissionForm.roles,(function(e){return t("th",[s._v(s._s(s.toWord(e.name)))])}))],2)]),s._v(" "),t("tbody",s._l(s.permissions,(function(e){return t("tr",[t("td",[s._v(s._s(s.toWord(e)))]),s._v(" "),s._l(s.permissionForm.roles,(function(i){return t("td",[t("label",{staticClass:"custom-control custom-checkbox",staticStyle:{cursor:"pointer"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.permissions,expression:"role_permission.permissions"}],staticClass:"custom-control-input",attrs:{type:"checkbox",disabled:i.name==s.getDefaultRole("admin")},domProps:{value:e,checked:Array.isArray(i.permissions)?s._i(i.permissions,e)>-1:i.permissions},on:{change:function(t){var n=i.permissions,o=t.target,r=!!o.checked;if(Array.isArray(n)){var a=e,l=s._i(n,a);o.checked?l<0&&s.$set(i,"permissions",n.concat([a])):l>-1&&s.$set(i,"permissions",n.slice(0,l).concat(n.slice(l+1)))}else s.$set(i,"permissions",r)}}}),s._v(" "),t("span",{staticClass:"custom-control-label"})])])}))],2)})),0)]),s._v(" "),t("button",{staticClass:"btn btn-info waves-effect waves-light pull-right",attrs:{type:"button"},on:{click:s.submit}},[s._v(s._s(s.trans("general.save")))])])])])])]),s._v(" "),t("right-panel",{attrs:{topic:s.help_topic}})],1)}),[],!1,null,null,null);const o=n.exports}}]);