"use strict";(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[6002],{25e3:(t,e,r)=>{r.r(e),r.d(e,{default:()=>o});const s={components:{},props:["stockTransfer"],data:function(){return{returnForm:new Form({date:"",quantity:"",stock_item_id:"",type:"",description:""}),types:[{text:i18n.inventory.stock_transfer_return_type_returned,value:"returned"},{text:i18n.inventory.stock_transfer_return_type_consumed,value:"consumed"},{text:i18n.inventory.stock_transfer_return_type_damaged,value:"damaged"},{text:i18n.inventory.stock_transfer_return_type_missed,value:"missed"}]}},mounted:function(){},methods:{submit:function(){var t=this,e=this.$loading.show();this.returnForm.post("/api/stock/transfer/"+this.stockTransfer.id+"/return").then((function(r){toastr.success(r.message),t.$emit("completed"),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))}},watch:{}};var n=r(51900);const a={components:{returnForm:(0,n.Z)(s,(function(){var t=this,e=t._self._c;return e("div",[e("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)},keydown:function(e){return t.returnForm.errors.clear(e.target.name)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v(t._s(t.trans("inventory.stock_transfer_return_date")))]),t._v(" "),e("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("inventory.stock_transfer_return_date")},on:{selected:function(e){return t.returnForm.errors.clear("date")}},model:{value:t.returnForm.date,callback:function(e){t.$set(t.returnForm,"date",e)},expression:"returnForm.date"}}),t._v(" "),e("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"date"}})],1)]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v(t._s(t.trans("inventory.stock_transfer_return_type")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.returnForm.type,expression:"returnForm.type"}],staticClass:"custom-select col-12",attrs:{name:"type"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.returnForm,"type",e.target.multiple?r:r[0])},function(e){return t.returnForm.errors.clear("type")}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.types,(function(r){return e("option",{domProps:{value:r.value}},[t._v("\n                            "+t._s(r.text)+"\n                          ")])}))],2),t._v(" "),e("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"type"}})],1)]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v(t._s(t.trans("inventory.stock_item")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.returnForm.stock_item_id,expression:"returnForm.stock_item_id"}],staticClass:"custom-select col-12",attrs:{name:"stock_item_id"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.returnForm,"stock_item_id",e.target.multiple?r:r[0])},function(e){return t.returnForm.errors.clear("stock_item_id")}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.stockTransfer.details,(function(r){return e("option",{domProps:{value:r.stock_item_id}},[t._v("\n                            "+t._s(r.item.name)+"\n                          ")])}))],2),t._v(" "),e("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"stock_item_id"}})],1)]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("\n                            "+t._s(t.trans("inventory.stock_transfer_quantity"))+"\n                        ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.returnForm.quantity,expression:"returnForm.quantity"}],staticClass:"form-control",attrs:{type:"text",name:"quantity",placeholder:t.trans("inventory.stock_transfer_quantity")},domProps:{value:t.returnForm.quantity},on:{input:function(e){e.target.composing||t.$set(t.returnForm,"quantity",e.target.value)}}}),t._v(" "),e("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"quantity"}})],1)]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("\n                            "+t._s(t.trans("inventory.stock_transfer_description"))+"\n                        ")]),t._v(" "),e("autosize-textarea",{attrs:{rows:"1",name:"description",placeholder:t.trans("inventory.stock_transfer_description")},model:{value:t.returnForm.description,callback:function(e){t.$set(t.returnForm,"description",e)},expression:"returnForm.description"}}),t._v(" "),e("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"description"}})],1)])]),t._v(" "),e("div",{staticClass:"card-footer text-right"},[e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])]),t._v(" "),e("div",{staticClass:"clearfix"})])}),[],!1,null,null,null).exports},data:function(){return{id:this.$route.params.id,stock_transfer:{},attachments:[]}},mounted:function(){this.get()},methods:{hasPermission:function(t){return helper.hasPermission(t)},get:function(){var t=this,e=this.$loading.show();axios.get("/api/stock/transfer/"+this.id).then((function(r){t.stock_transfer=r.stock_transfer,t.attachments=r.attachments,e.hide()})).catch((function(r){e.hide(),helper.showErrorMsg(r),t.$router.push("/inventory/stock/transfer")}))},getEmployeeName:function(t){return helper.getEmployeeName(t)},getEmployeeDesignationOnDate:function(t,e){return helper.getEmployeeDesignationOnDate(t,e)},getStudentName:function(t){return helper.getStudentName(t)},formatCurrency:function(t){return helper.formatCurrency(t)},confirmDelete:function(t){var e=this;return function(r){return e.deleteReturn(t)}},deleteReturn:function(t){var e=this,r=this.$loading.show();axios.delete("/api/stock/transfer/"+this.stock_transfer.id+"/return/"+t.id).then((function(t){toastr.success(t.message),e.get(),r.hide()})).catch((function(t){r.hide(),helper.showErrorMsg(t)}))},getReturnType:function(t){return i18n.inventory["stock_transfer_return_type_"+t]},getCount:function(t,e){var r=0;return this.stock_transfer.return_details.forEach((function(s){s.stock_item_id==t.id&&s.type==e&&(r+=1)})),r}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)},momentTime:function(t){return helper.formatTime(t)}},computed:{authToken:function(){return helper.getAuthToken()}}};const o=(0,n.Z)(a,(function(){var t=this,e=t._self._c;return t.stock_transfer.id?e("div",[e("div",{staticClass:"page-titles"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-6"},[e("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("inventory.stock_transfer_detail"))+"\n                    "),e("span",{staticClass:"card-subtitle"},[t._v(t._s("#"+t.stock_transfer.id))])])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"action-buttons pull-right"},[e("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/inventory/stock/transfer"}},[e("i",{staticClass:"fas fa-list"}),t._v(" "),e("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("inventory.stock_transfer")))])])],1)])])]),t._v(" "),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-6 pr-0"},[e("div",{staticClass:"card border-right"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive px-2"},[e("table",{staticClass:"table table-sm custom-show-table"},[e("tbody",[e("tr",[e("td",[t._v(t._s(t.trans("inventory.stock_transfer_detail")))]),t._v(" "),e("td",["employee"==t.stock_transfer.type?[t._v("\n                                                "+t._s(t.trans("employee.employee_name")+": "+t.getEmployeeName(t.stock_transfer.employee))+" "),e("br"),t._v("\n                                                "+t._s(t.getEmployeeDesignationOnDate(t.stock_transfer.employee,t.stock_transfer.date))+"\n                                            ")]:"student"==t.stock_transfer.type?[t._v("\n                                                "+t._s(t.trans("student.student_name")+": "+t.getStudentName(t.stock_transfer.student))+" "),e("br"),t._v("\n                                                "+t._s(t.trans("student.first_guardian_name")+": "+t.stock_transfer.student.parent.first_guardian_name)+" "),e("br"),t._v("\n                                                "+t._s(t.trans("student.contact_number")+": "+t.stock_transfer.student.contact_number)+" "),e("br")]:"room"==t.stock_transfer.type?[t._v("\n                                                "+t._s(t.trans("asset.room"))+": "+t._s(t.stock_transfer.room.name)+"\n                                            ")]:t._e()],2)]),t._v(" "),e("tr",[e("td",[t._v(t._s(t.trans("inventory.stock_transfer_date")))]),t._v(" "),e("td",[t._v(t._s(t._f("moment")(t.stock_transfer.date)))])]),t._v(" "),e("tr",[e("td",[t._v(t._s(t.trans("inventory.stock_transfer_return_due_date")))]),t._v(" "),e("td",[t.stock_transfer.return_due_date?[t._v("\n                                                "+t._s(t._f("moment")(t.stock_transfer.return_due_date))+"\n                                            ")]:[t._v("-")]],2)]),t._v(" "),e("tr",[e("td",[t._v(t._s(t.trans("general.entry_by")))]),t._v(" "),e("td",[t._v("\n                                            "+t._s(t.getEmployeeName(t.stock_transfer.user.employee))+" "),e("br"),t._v("\n                                            "+t._s(t.getEmployeeDesignationOnDate(t.stock_transfer.user.employee,t.stock_transfer.date))+"\n                                        ")])]),t._v(" "),e("tr",[e("td",[t._v(t._s(t.trans("inventory.stock_transfer_description")))]),t._v(" "),e("td",[t._v(t._s(t.stock_transfer.description))])]),t._v(" "),e("tr",[e("td",{attrs:{colspan:"2"}},[t.attachments.length?e("div",[e("ul",{staticClass:"m-t-10 upload-file-list"},t._l(t.attachments,(function(r){return e("li",{staticClass:"upload-file-list-item"},[e("a",{staticClass:"no-link-color",attrs:{href:"/stock/transfer/".concat(t.stock_transfer.id,"/attachment/").concat(r.uuid,"/download?token=").concat(t.authToken)}},[e("i",{class:["file-icon","fas","fa-lg",r.file_info.icon]}),t._v(" "),e("span",{staticClass:"upload-file-list-item-size"},[t._v(t._s(r.file_info.size))]),t._v(" "+t._s(r.user_filename))])])})),0)]):t._e()])])])])]),t._v(" "),e("h4",{staticClass:"card-title px-3"},[t._v(t._s(t.trans("inventory.stock_item")))]),t._v(" "),e("div",{staticClass:"table-responsive px-2"},[e("table",{staticClass:"table table-sm"},[e("thead",[e("tr",[e("th",{staticClass:"p-l-20"},[t._v(t._s(t.trans("inventory.stock_item")))]),t._v(" "),e("th",[t._v(t._s(t.trans("inventory.stock_transfer_quantity")))]),t._v(" "),e("th",[t._v(t._s(t.trans("inventory.stock_transfer_return_detail")))]),t._v(" "),e("th",[t._v(t._s(t.trans("inventory.stock_item_description")))])])]),t._v(" "),e("tbody",t._l(t.stock_transfer.details,(function(r){return e("tr",[e("td",{staticClass:"p-l-20"},[t._v(t._s(r.item.name))]),t._v(" "),e("td",[t._v(t._s(r.quantity))]),t._v(" "),e("td",[t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_returned"))+": "+t._s(t.getCount(r.item,"returned"))+" "),e("br"),t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_consumed"))+": "+t._s(t.getCount(r.item,"consumed"))+" "),e("br"),t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_damaged"))+": "+t._s(t.getCount(r.item,"damaged"))+" "),e("br"),t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_missed"))+": "+t._s(t.getCount(r.item,"missed"))+"\n                                        ")]),t._v(" "),e("td",[t._v(t._s(r.description))])])})),0)])])])])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6 p-0"},[e("div",{staticClass:"card card-form"},[e("div",{staticClass:"card-body"},[e("h4",{staticClass:"card-title"},[t._v(t._s(t.trans("inventory.stock_transfer_return")))]),t._v(" "),t.hasPermission("edit-stock-transfer")?e("return-form",{staticClass:"pr-3",attrs:{"stock-transfer":t.stock_transfer},on:{completed:t.get}}):t._e(),t._v(" "),e("h4",{staticClass:"card-title"},[t._v(t._s(t.trans("inventory.stock_transfer_return_detail")))]),t._v(" "),t.stock_transfer.return_details.length?e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-sm pr-3"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.trans("inventory.stock_transfer_return_date")))]),t._v(" "),e("th",[t._v(t._s(t.trans("inventory.stock_transfer_quantity")))]),t._v(" "),e("th",[t._v(t._s(t.trans("inventory.stock_transfer_return_type")))]),t._v(" "),e("th",[t._v(t._s(t.trans("inventory.stock_transfer_description")))]),t._v(" "),t.hasPermission("edit-stock-transfer")?e("th",{staticClass:"table-option"},[t._v(t._s(t.trans("general.action")))]):t._e()])]),t._v(" "),e("tbody",t._l(t.stock_transfer.return_details,(function(r){return e("tr",[e("td",[t._v(t._s(t._f("moment")(r.date)))]),t._v(" "),e("td",[t._v(t._s(r.quantity))]),t._v(" "),e("td",[t._v("\n                                            "+t._s(t.getReturnType(r.type))+"\n                                        ")]),t._v(" "),e("td",[t._v(t._s(r.description))]),t._v(" "),t.hasPermission("edit-stock-transfer")?e("td",{staticClass:"table-option"},[e("div",{staticClass:"btn-group"},[e("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:t.confirmDelete(r)},expression:"{ok: confirmDelete(return_detail)}"},{name:"tooltip",rawName:"v-tooltip",value:t.trans("inventory.delete_stock_transfer_return"),expression:"trans('inventory.delete_stock_transfer_return')"}],key:r.id,staticClass:"btn btn-danger btn-sm"},[e("i",{staticClass:"fas fa-trash"})])])]):t._e()])})),0)])]):e("div",{staticClass:"px-4 pb-4"},[e("small",[t._v(t._s(t.trans("general.no_result_found")))])])],1)])])])])]):t._e()}),[],!1,null,null,null).exports}}]);